{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\RankItem.js"],"names":["cc","Class","extends","Component","properties","bgImg","Node","cupImg","headImg","playerName","time","cgNum","rankNum","start","initView","rank","data","isme","active","loader","load","url","raw","type","err","texture","getComponent","Sprite","spriteFrame","SpriteFrame","setNodeText","createImage","avatarUrl","nickname","total_pass_time","level_num","node","text","label","Label","string","setNodeTexture","filename","sprite","setTexture","CC_WECHATGAME","image","wx","onload","Texture2D","initWithElement","handleLoadedTexture","e","log","src"],"mappings":"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","file":"RankItem.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        bgImg: cc.Node,\r\n        cupImg: cc.Node,\r\n        headImg: cc.Node, \r\n        playerName: cc.Node,\r\n        time: cc.Node,\r\n        cgNum: cc.Node,\r\n        rankNum: cc.Node,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    initView(rank, data, isme){\r\n        if(rank <= 3){\r\n            this.cupImg.active = true;\r\n            this.rankNum.active = false;\r\n            cc.loader.load({\r\n                url: cc.url.raw( \"resources/cup_\" + rank + \".png\"), type: 'png'\r\n            }, (err, texture) => {\r\n                this.cupImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            });\r\n            // this.cupImg.active = true;\r\n            // this.setNodeTexture(this.cupImg, \"resources/cup_\" + rank + \".png\")\r\n        }else{\r\n            this.rankNum.active = true;\r\n            this.cupImg.active = false;\r\n            this.setNodeText(this.rankNum, rank);\r\n        }\r\n\r\n        if(isme){\r\n            cc.loader.load({\r\n                url: cc.url.raw( \"resources/mybar.png\"), type: 'png'\r\n            }, (err, texture) => {\r\n                this.bgImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            });\r\n        }\r\n\r\n        this.createImage(data.avatarUrl);\r\n        this.setNodeText(this.playerName, data.nickname);\r\n        this.setNodeText(this.time, data.total_pass_time);\r\n        this.setNodeText(this.cgNum, data.level_num);\r\n    },\r\n\r\n    setNodeText(node, text){\r\n        var label = node.getComponent(cc.Label);\r\n        if(label){\r\n            label.string = text;\r\n        }\r\n    },\r\n\r\n    setNodeTexture(node, filename){\r\n        var sprite = node.getComponent(cc.Sprite);\r\n        if(sprite){\r\n            sprite.spriteFrame.setTexture(cc.url.raw(filename));\r\n        }\r\n    },\r\n\r\n    createImage(avatarUrl) {\r\n        if (CC_WECHATGAME) {\r\n            try {\r\n                let image = wx.createImage();\r\n                image.onload = () => {\r\n                    try {\r\n                        let texture = new cc.Texture2D();\r\n                        texture.initWithElement(image);\r\n                        texture.handleLoadedTexture();\r\n                        this.headImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n                    } catch (e) {\r\n                        cc.log(e);\r\n                        this.headImg.active = false;\r\n                    }\r\n                };\r\n                image.src = avatarUrl;\r\n            }catch (e) {\r\n                cc.log(e);\r\n                this.node.active = false;\r\n            }\r\n        } else {\r\n            cc.loader.load({\r\n                url: avatarUrl, type: 'jpg'\r\n            }, (err, texture) => {\r\n                this.headImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            });\r\n        }\r\n    }\r\n\r\n    // update (dt) {},\r\n});\r\n"]}