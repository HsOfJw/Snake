{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\WinLayerRankItem.js"],"names":["cc","Class","extends","Component","properties","cupImg","Node","headImg","playerName","time","rankNum","bg","start","initView","rank","data","isme","active","loader","load","url","raw","type","err","texture","getComponent","Sprite","spriteFrame","SpriteFrame","setNodeText","createImage","avatarUrl","nickname","curLevelMinTime","node","text","label","Label","string","setNodeTexture","filename","sprite","setTexture","CC_WECHATGAME","image","wx","onload","Texture2D","initWithElement","handleLoadedTexture","e","log","src"],"mappings":"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","file":"WinLayerRankItem.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        cupImg: cc.Node,\r\n        headImg: cc.Node, \r\n        playerName: cc.Node,\r\n        time: cc.Node,\r\n        rankNum: cc.Node,\r\n        bg: cc.Node,\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    initView(rank, data, isme){\r\n        if(rank <= 3){\r\n            this.cupImg.active = true;\r\n            this.rankNum.active = false;\r\n            cc.loader.load({\r\n                url: cc.url.raw( \"resources/winlayer_cup_\" + rank + \".png\"), type: 'png'\r\n            }, (err, texture) => {\r\n                this.cupImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            });\r\n        }else{\r\n            this.rankNum.active = true;\r\n            this.cupImg.active = false;\r\n            this.setNodeText(this.rankNum, rank);\r\n        }\r\n\r\n        this.bg.active = isme;\r\n\r\n        this.createImage(data.avatarUrl);\r\n        this.setNodeText(this.playerName, data.nickname);\r\n        this.setNodeText(this.time, data.curLevelMinTime);\r\n    },\r\n\r\n    setNodeText(node, text){\r\n        var label = node.getComponent(cc.Label);\r\n        if(label){\r\n            label.string = text;\r\n        }\r\n    },\r\n\r\n    setNodeTexture(node, filename){\r\n        var sprite = node.getComponent(cc.Sprite);\r\n        if(sprite){\r\n            sprite.spriteFrame.setTexture(cc.url.raw(filename));\r\n        }\r\n    },\r\n\r\n    createImage(avatarUrl) {\r\n        if (CC_WECHATGAME) {\r\n            try {\r\n                let image = wx.createImage();\r\n                image.onload = () => {\r\n                    try {\r\n                        let texture = new cc.Texture2D();\r\n                        texture.initWithElement(image);\r\n                        texture.handleLoadedTexture();\r\n                        this.headImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n                    } catch (e) {\r\n                        cc.log(e);\r\n                        this.headImg.active = false;\r\n                    }\r\n                };\r\n                image.src = avatarUrl;\r\n            }catch (e) {\r\n                cc.log(e);\r\n                this.node.active = false;\r\n            }\r\n        } else {\r\n            cc.loader.load({\r\n                url: avatarUrl, type: 'jpg'\r\n            }, (err, texture) => {\r\n                this.headImg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            });\r\n        }\r\n    }\r\n\r\n    // update (dt) {},\r\n});\r\n"]}