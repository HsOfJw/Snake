{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\gameobject/assets\\scripts\\gameobject\\Entity.js"],"names":["BaseNode","require","cc","Class","extends","gid","nextGID","sprite","ctor","setName","arguments","addComponent","Sprite","spriteFrame","SpriteFrame","refreshPos","doEnter","doExit","getNewPos","newPos","Game","MapUtil","ConvertGIDToPos","doDropAction","self","GlobalVar","isGameOver","GetMapBlockNum","width","moveDistance","GetMapBlockSize","moveTo","GameConfig","DropSpeed","sequence","callFunc","dropFinish","runAction","pos","setPosition","getGID","setGID","setNextGID","nextGid","getNextGID"],"mappings":";;;;;;AAAA,IAAIA,WAAWC,QAAQ,UAAR,CAAf;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASJ,QADJ;;AAGLK,SAAK,CAHA;;AAKLC,aAAS,CALJ;;AAOLC,YAAQ,IAPH;;AASLC,QATK,kBASC;AACF,aAAKC,OAAL,CAAa,QAAb;;AAEA,aAAKJ,GAAL,GAAWK,UAAU,CAAV,CAAX;AACA,aAAKJ,OAAL,GAAe,KAAKD,GAApB;;AAEA,YAAIE,SAAS,KAAKI,YAAL,CAAkBT,GAAGU,MAArB,CAAb;AACAL,eAAOM,WAAP,GAAqB,IAAIX,GAAGY,WAAP,EAArB;;AAEA,aAAKC,UAAL,CAAgB,KAAKV,GAArB;AACA,aAAKE,MAAL,GAAcA,MAAd;AACH,KApBI;AAsBLS,WAtBK,qBAsBI,CAER,CAxBI;AA0BLC,UA1BK,oBA0BG,CAEP,CA5BI;;;AA8BLC,eAAW,mBAASb,GAAT,EAAa;AACpB,YAAIc,SAASC,KAAKC,OAAL,CAAaC,eAAb,CAA6BjB,GAA7B,CAAb;AACA,eAAOc,MAAP;AACH,KAjCI;;AAmCLI,kBAAc,wBAAU;AACpB,YAAIC,OAAO,IAAX;;AAEA,YAAGJ,KAAKK,SAAL,CAAeC,UAAlB,EAA6B;AACzB;AACH;;AAED,aAAKpB,OAAL,GAAe,KAAKD,GAAL,GAAWe,KAAKC,OAAL,CAAaM,cAAb,GAA8BC,KAAxD;AACA,YAAIvB,MAAM,KAAKC,OAAf;;AAEA,YAAIuB,eAAeT,KAAKC,OAAL,CAAaS,eAAb,GAA+BF,KAAlD;AACA,YAAIT,SAAS,KAAKD,SAAL,CAAeb,GAAf,CAAb;;AAEA,YAAI0B,SAAS,IAAI7B,GAAG6B,MAAP,CAAcC,WAAWC,SAAzB,EAAoCd,MAApC,CAAb;AACA,YAAIe,WAAW,IAAIhC,GAAGgC,QAAP,CAAgBH,MAAhB,EAAwB7B,GAAGiC,QAAH,CAAY,YAAU;AACzDX,iBAAKY,UAAL;AACH,SAFsC,CAAxB,CAAf;AAGA,aAAKC,SAAL,CAAeH,QAAf;AACA,aAAK7B,GAAL,GAAWA,GAAX;AACH,KAtDI;;AAwDL+B,cAxDK,wBAwDO,CAEX,CA1DI;AA4DLrB,cA5DK,sBA4DMV,GA5DN,EA4DU;AACX,YAAIiC,MAAMlB,KAAKC,OAAL,CAAaC,eAAb,CAA6BjB,GAA7B,CAAV;AACA,aAAKkC,WAAL,CAAiBD,GAAjB;AACH,KA/DI;AAiELE,UAjEK,oBAiEG;AACJ,eAAO,KAAKnC,GAAZ;AACH,KAnEI;AAqELoC,UArEK,kBAqEEpC,GArEF,EAqEM;AACP,aAAKA,GAAL,GAAWA,GAAX;AACH,KAvEI;AAyELqC,cAzEK,sBAyEMC,OAzEN,EAyEc;AACf,aAAKrC,OAAL,GAAeqC,OAAf;AACH,KA3EI;AA6ELC,cA7EK,wBA6EO;AACR,eAAO,KAAKtC,OAAZ;AACH;AA/EI,CAAT","file":"Entity.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\gameobject","sourcesContent":["var BaseNode = require(\"BaseNode\");\r\n\r\ncc.Class({\r\n    extends: BaseNode,\r\n\r\n    gid: 0,\r\n\r\n    nextGID: 0,\r\n\r\n    sprite: null,\r\n\r\n    ctor(){\r\n        this.setName(\"Entity\");\r\n\r\n        this.gid = arguments[0];\r\n        this.nextGID = this.gid;\r\n\r\n        var sprite = this.addComponent(cc.Sprite);\r\n        sprite.spriteFrame = new cc.SpriteFrame();\r\n\r\n        this.refreshPos(this.gid);\r\n        this.sprite = sprite;\r\n    },\r\n\r\n    doEnter(){\r\n\r\n    },\r\n\r\n    doExit(){\r\n\r\n    },\r\n\r\n    getNewPos: function(gid){\r\n        var newPos = Game.MapUtil.ConvertGIDToPos(gid);\r\n        return newPos;\r\n    },\r\n    \r\n    doDropAction: function(){\r\n        var self = this;\r\n\r\n        if(Game.GlobalVar.isGameOver){\r\n            return;\r\n        }\r\n\r\n        this.nextGID = this.gid + Game.MapUtil.GetMapBlockNum().width;\r\n        var gid = this.nextGID;\r\n\r\n        var moveDistance = Game.MapUtil.GetMapBlockSize().width;\r\n        var newPos = this.getNewPos(gid);\r\n\r\n        var moveTo = new cc.moveTo(GameConfig.DropSpeed, newPos);\r\n        var sequence = new cc.sequence(moveTo, cc.callFunc(function(){\r\n            self.dropFinish();\r\n        }));\r\n        this.runAction(sequence);\r\n        this.gid = gid;\r\n    },\r\n\r\n    dropFinish(){\r\n\r\n    },\r\n\r\n    refreshPos(gid){\r\n        var pos = Game.MapUtil.ConvertGIDToPos(gid);\r\n        this.setPosition(pos);\r\n    },\r\n\r\n    getGID(){\r\n        return this.gid;\r\n    },\r\n\r\n    setGID(gid){\r\n        this.gid = gid;\r\n    },\r\n\r\n    setNextGID(nextGid){\r\n        this.nextGID = nextGid;\r\n    },\r\n\r\n    getNextGID(){\r\n        return this.nextGID;\r\n    }\r\n});\r\n"]}