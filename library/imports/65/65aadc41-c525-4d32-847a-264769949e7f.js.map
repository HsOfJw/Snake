{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\SnakeNode.js"],"names":["MoveDirection","require","Entity","MoveComponent","SnakeDirection","cc","Class","extends","snakes","preDirection","direction","moveComponent","isChanged","ctor","setName","doEnter","SD_Right","addComponent","doExit","changeParent","parent","myWorldPos","convertToWorldSpaceAR","Vec2","ZERO","pos","position","newPos","convertToNodeSpaceAR","moveFinish","setDirection","getDirection","doRotateAction","getNewPos","gid","Game","MapUtil","ConvertGIDToPos","x","director","getWinSize","width","doTransfrom","setSnake","snake","frameOnMove","dt"],"mappings":";;;;;;AAAA,IAAIA,gBAAgBC,QAAQ,aAAR,EAAuBD,aAA3C;AACA,IAAIE,SAASD,QAAQ,QAAR,CAAb;AACA,IAAIE,gBAAgBF,QAAQ,eAAR,EAAyBE,aAA7C;AACA,IAAIC,iBAAiBH,QAAQ,aAAR,EAAuBG,cAA5C;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASL,MADJ;;AAGLM,YAAQ,IAHH;;AAKLC,kBAAc,IALT;AAMLC,eAAW,IANN;;AAQLC,mBAAe,IARV;;AAULC,eAAW,IAVN;;AAYLC,QAZK,kBAYC;AACF,aAAKC,OAAL,CAAa,WAAb;;AAEA,aAAKC,OAAL;AACH,KAhBI;AAkBLA,WAlBK,qBAkBI;AACL,aAAKH,SAAL,GAAiB,KAAjB;AACA,aAAKF,SAAL,GAAiBN,eAAeY,QAAhC;AACA,aAAKP,YAAL,GAAoBL,eAAeY,QAAnC;AACA,aAAKL,aAAL,GAAqB,KAAKM,YAAL,CAAkB,eAAlB,CAArB;AACH,KAvBI;AAyBLC,UAzBK,oBAyBG;AACJ,aAAKV,MAAL,GAAc,IAAd;;AAEA,aAAKG,aAAL,GAAqB,IAArB;AACH,KA7BI;AA+BLQ,gBA/BK,wBA+BQC,MA/BR,EA+Be;AAChB,YAAIC,aAAa,KAAKC,qBAAL,CAA2BjB,GAAGkB,IAAH,CAAQC,IAAnC,CAAjB;;AAEA,YAAIC,MAAM,KAAKC,QAAf;AACA,YAAIC,SAASP,OAAOQ,oBAAP,CAA4BP,UAA5B,CAAb;AACA,aAAKK,QAAL,GAAgBC,MAAhB;AACA,aAAKP,MAAL,GAAcA,MAAd;AACA,aAAKR,SAAL,GAAiB,IAAjB;AACH,KAvCI;AAyCLiB,cAzCK,wBAyCO,CACX,CA1CI;;;AA4CLC,kBAAc,sBAASpB,SAAT,EAAmB;AAC7B,aAAKD,YAAL,GAAoB,KAAKC,SAAzB;AACA,aAAKA,SAAL,GAAiBA,SAAjB;AACH,KA/CI;;AAiDLqB,kBAAc,wBAAU;AACpB,eAAO,KAAKrB,SAAZ;AACH,KAnDI;;AAqDLsB,oBAAgB,0BAAU,CAEzB,CAvDI;;AAyDLC,eAAW,mBAASC,GAAT,EAAa;AACpB,YAAIP,SAASQ,KAAKC,OAAL,CAAaC,eAAb,CAA6BH,GAA7B,CAAb;;AAEA,YAAG,KAAKtB,SAAR,EAAkB;AACde,mBAAOW,CAAP,IAAY,CAACjC,GAAGkC,QAAH,CAAYC,UAAZ,GAAyBC,KAAzB,GAAiC,IAAlC,IAA0C,GAAtD;;AAEAd,qBAAS,KAAKP,MAAL,CAAYQ,oBAAZ,CAAiCD,MAAjC,CAAT;AACH;;AAED,eAAOA,MAAP;AACH,KAnEI;;AAqELe,iBAAa,uBAAU,CAEtB,CAvEI;;AAyELC,cAAU,kBAASC,KAAT,EAAe;AACrB,aAAKpC,MAAL,GAAcoC,KAAd;AACH,KA3EI;;AA6ELC,iBAAa,qBAASC,EAAT,EAAY;AACrB,aAAKnC,aAAL,CAAmBkC,WAAnB,CAA+BC,EAA/B;AACH;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzFK,CAAT","file":"SnakeNode.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["var MoveDirection = require('ConstDefine').MoveDirection;\r\nvar Entity = require('Entity');\r\nvar MoveComponent = require('MoveComponent').MoveComponent;\r\nvar SnakeDirection = require('ConstDefine').SnakeDirection;\r\n\r\ncc.Class({\r\n    extends: Entity,\r\n\r\n    snakes: null,\r\n\r\n    preDirection: null,\r\n    direction: null,\r\n\r\n    moveComponent: null,\r\n\r\n    isChanged: null,\r\n\r\n    ctor(){\r\n        this.setName(\"SnakeNode\");\r\n\r\n        this.doEnter();\r\n    },\r\n\r\n    doEnter(){\r\n        this.isChanged = false;\r\n        this.direction = SnakeDirection.SD_Right;\r\n        this.preDirection = SnakeDirection.SD_Right;\r\n        this.moveComponent = this.addComponent(\"MoveComponent\");\r\n    },\r\n\r\n    doExit(){\r\n        this.snakes = null;\r\n\r\n        this.moveComponent = null;\r\n    },\r\n\r\n    changeParent(parent){\r\n        var myWorldPos = this.convertToWorldSpaceAR(cc.Vec2.ZERO);\r\n\r\n        var pos = this.position;\r\n        var newPos = parent.convertToNodeSpaceAR(myWorldPos);\r\n        this.position = newPos;\r\n        this.parent = parent;\r\n        this.isChanged = true;\r\n    },\r\n\r\n    moveFinish(){\r\n    },\r\n\r\n    setDirection: function(direction){\r\n        this.preDirection = this.direction;\r\n        this.direction = direction;\r\n    },\r\n    \r\n    getDirection: function(){\r\n        return this.direction;\r\n    },\r\n\r\n    doRotateAction: function(){\r\n\r\n    },\r\n\r\n    getNewPos: function(gid){\r\n        var newPos = Game.MapUtil.ConvertGIDToPos(gid);\r\n\r\n        if(this.isChanged){\r\n            newPos.x += (cc.director.getWinSize().width - 1334) * 0.5;\r\n\r\n            newPos = this.parent.convertToNodeSpaceAR(newPos);\r\n        }\r\n\r\n        return newPos;\r\n    },\r\n\r\n    doTransfrom: function(){\r\n        \r\n    },\r\n\r\n    setSnake: function(snake){\r\n        this.snakes = snake;\r\n    },\r\n\r\n    frameOnMove: function(dt){\r\n        this.moveComponent.frameOnMove(dt);\r\n    },\r\n\r\n    // gameOver(){\r\n    //     if(this.snakes){\r\n    //         this.snakes = null;\r\n    //     }\r\n    //     if(this.moveComponent){\r\n    //         this.moveComponent.gameOver();\r\n    //         this.moveComponent = null;\r\n    //     }\r\n    // }\r\n});\r\n"]}