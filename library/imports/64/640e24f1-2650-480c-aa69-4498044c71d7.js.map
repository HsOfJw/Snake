{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\SnakeBody.js"],"names":["SnakeSection","require","SnakeBody","bodyLength","parent","arguments","sectionVec","addSection","gid","section","addChild","name","length","push","setFirstSection","getAllSection","stopAllActions","i","getSectionByGID","getSectionGID","index","maxIndex","newIndex","getGID","getSectionDirection","getDirection","getSectionNextGID","getNextGID","setSectionNextGID","setNextGID","setSectionDirectioin","direction","setDirection","doExit","setMyChangedDirtyFlag","dirtyFlag","isFrist","setSectionNum","num","getSectionNum","moveToLeft","moveToRight","moveToUp","moveToDown","doDropAction","doMoveAction","getLastSection","setSnake","snake","frameOnMove","dt","gameOver","module","exports"],"mappings":"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","file":"SnakeBody.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["var SnakeSection = require(\"SnakeSection\");\r\n\r\nvar SnakeBody = function(){\r\n\r\n    this.bodyLength = 0;\r\n\r\n    this.parent = arguments[0];\r\n\r\n    this.sectionVec = null;\r\n\r\n    this.addSection = function(gid){\r\n        if(this.sectionVec == null){\r\n            this.sectionVec = [];\r\n        }\r\n        \r\n        var section = new SnakeSection(gid);\r\n        this.parent.addChild(section, 8);\r\n        section.name = section.name + this.sectionVec.length;\r\n\r\n        this.sectionVec.push(section);\r\n\r\n        this.bodyLength++;\r\n\r\n        this.setFirstSection(gid);\r\n    },\r\n\r\n    this.getAllSection = function(){\r\n        return this.sectionVec;\r\n    },\r\n\r\n    this.stopAllActions = function(){\r\n        for(var i = 0; i < this.bodyLength; i ++){\r\n            if(this.sectionVec[i]){\r\n                this.sectionVec[i].stopAllActions();\r\n            }\r\n        }\r\n    },\r\n\r\n    this.getSectionByGID = function(gid){\r\n        for(var i = 0; i < this.bodyLength; i ++){\r\n            if(this.sectionVec[i].gid == gid){\r\n                return this.sectionVec[i];\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n\r\n    this.getSectionGID = function(index){\r\n        if(this.sectionVec.length <= 0)\r\n            return 0;\r\n\r\n        var maxIndex = this.sectionVec.length - 1;\r\n        var newIndex = maxIndex - index;\r\n\r\n        if(this.sectionVec[newIndex]){\r\n            return this.sectionVec[newIndex].getGID();\r\n        }\r\n        return 0;\r\n    },\r\n\r\n    \r\n    this.getSectionDirection = function(index){\r\n        if(this.sectionVec.length <= 0)\r\n            return 0;\r\n\r\n        var maxIndex = this.sectionVec.length - 1;\r\n        var newIndex = maxIndex - index;\r\n\r\n        if(this.sectionVec[newIndex]){\r\n            return this.sectionVec[newIndex].getDirection();\r\n        }\r\n        return 0;\r\n    },\r\n\r\n    this.getSectionNextGID = function(index){\r\n        if(this.sectionVec.length <= 0)\r\n            return 0;\r\n\r\n        var maxIndex = this.sectionVec.length - 1;\r\n        var newIndex = maxIndex - index;\r\n\r\n        if(this.sectionVec[newIndex]){\r\n            return this.sectionVec[newIndex].getNextGID();\r\n        }\r\n        return 0;\r\n    },\r\n\r\n    this.setSectionNextGID = function(index, gid){\r\n        if(this.sectionVec.length <= 0)\r\n            return 0;\r\n\r\n        var maxIndex = this.sectionVec.length - 1;\r\n        var newIndex = maxIndex - index;\r\n\r\n        if(this.sectionVec[newIndex]){\r\n            this.sectionVec[newIndex].setNextGID(gid);\r\n        }\r\n    },\r\n\r\n    this.setSectionDirectioin = function(index, direction){\r\n        if(this.sectionVec.length <= 0)\r\n            return 0;\r\n\r\n        var maxIndex = this.sectionVec.length - 1;\r\n        var newIndex = maxIndex - index;\r\n\r\n        if(this.sectionVec[newIndex]){\r\n            this.sectionVec[newIndex].setDirection(direction);\r\n        }\r\n    },\r\n\r\n    this.setDirection = function(direction){\r\n        for(var i = 0; i < this.bodyLength; i ++){\r\n            this.sectionVec[i].setDirection(direction);\r\n        }\r\n    },\r\n\r\n    this.doExit = function(){\r\n        for(var i = 0; i < this.bodyLength; i ++){\r\n            this.sectionVec[i].doExit();\r\n        }\r\n    },\r\n\r\n    this.setMyChangedDirtyFlag = function(dirtyFlag){\r\n        for(var i = 0; i < this.bodyLength; i ++){\r\n            this.sectionVec[i].setMyChangedDirtyFlag(dirtyFlag);\r\n        }\r\n    },\r\n\r\n    this.setFirstSection = function(gid){\r\n        for(var i = 0; i < this.bodyLength; i ++){\r\n            if(this.sectionVec[i].gid == gid){\r\n                this.sectionVec[i].isFrist = true;\r\n            }else{\r\n                this.sectionVec[i].isFrist = false;\r\n            }\r\n        }\r\n    },\r\n\r\n    //身体节数\r\n    this.setSectionNum = function(num){\r\n        this.bodyLength = num;\r\n    },\r\n\r\n    this.getSectionNum = function(){\r\n        return this.bodyLength;\r\n    },\r\n\r\n    this.moveToLeft = function(){\r\n        for(var i = 0; i < this.bodyLength; i ++){\r\n            this.sectionVec[i].moveToLeft();\r\n        }\r\n    },\r\n    \r\n    this.moveToRight = function(){\r\n        for(var i = 0; i < this.bodyLength; i ++){\r\n            this.sectionVec[i].moveToRight();\r\n        }\r\n    },\r\n\r\n    this.moveToUp = function(){\r\n        for(var i = 0; i < this.bodyLength; i ++){\r\n            this.sectionVec[i].moveToUp();\r\n        }\r\n    },\r\n\r\n    this.moveToDown = function(){\r\n        for(var i = 0; i < this.bodyLength; i ++){\r\n            this.sectionVec[i].moveToDown();\r\n        }\r\n    },\r\n\r\n    this.doDropAction = function(){\r\n        for(var i = 0; i < this.bodyLength; i ++){\r\n            this.sectionVec[i].doDropAction();\r\n        }\r\n    },\r\n\r\n    this.doMoveAction = function(){\r\n        for(var i = 0; i < this.bodyLength; i ++){\r\n            this.sectionVec[i].doMoveAction();\r\n        }\r\n    },\r\n\r\n    this.getLastSection = function(){\r\n        return this.sectionVec[0];\r\n    },\r\n    \r\n    this.setSnake = function(snake){\r\n        for(var i = 0; i < this.bodyLength; i ++){\r\n            this.sectionVec[i].setSnake(snake);\r\n        }\r\n    },\r\n\r\n    this.frameOnMove = function (dt){\r\n        for(var i = 0; i < this.bodyLength; i ++){\r\n            this.sectionVec[i].frameOnMove(dt);\r\n        }\r\n    },\r\n\r\n    this.gameOver = function(){\r\n        for(var i = 0; i < this.bodyLength; i ++){\r\n            this.sectionVec[i].gameOver();\r\n        }\r\n    }\r\n};\r\n\r\nmodule.exports = SnakeBody;\r\n"]}