{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\network/assets\\scripts\\network\\SendMessage.js"],"names":["window","Game","SendMessage","SendLogin","code","iv","encryptedData","successCb","cc","log","request","game_id","GameConfig","GameID","toString","onMessage","data","NetManager","sendMsg","LoginAddr","SendGetGameListMessage","locationID","callback","location","console","res","errno","GetGameList","SendPassLevelTime","level_id","time","user_id","GlobalVar","userID","SendPassLevelTimeAddr","SendGetPassLevelMinTime","EventCenter","DispatchEvent","MessageType","Game_MIN_TIME_REP","Game_MIN_TIME_REP_NO_DATA","GetPassLevelTimeAddr","SendGetConfigMessage","GameLocalData","SaveConfigData","GetConfigAddr","SendGetGameAdMessage","gid","GetGameADAddr"],"mappings":"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","file":"SendMessage.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\network","sourcesContent":["window.Game = window.Game || {};\r\n\r\nwindow.Game.SendMessage = {\r\n    \r\n    SendLogin: function(code, iv, encryptedData, successCb){\r\n        cc.log(\"SendLogin: code = \",code , \"iv = \", iv, \"encryted = \", encryptedData);\r\n\r\n        var request = {\r\n            code: code,\r\n            game_id: GameConfig.GameID.toString(),\r\n            iv: iv,\r\n            encryptedData: encryptedData,\r\n        };\r\n        \r\n        var onMessage = function(data){\r\n            cc.log(\"SendLogin == onMessage\", data);\r\n            successCb(data);\r\n        }\r\n\r\n        Game.NetManager.sendMsg(\"Get\", GameConfig.LoginAddr, request, onMessage);\r\n    },\r\n\r\n    //发送获取游戏列表的消息\r\n    SendGetGameListMessage(locationID, callback){\r\n        var request = {\r\n            game_id: GameConfig.GameID,\r\n            location: locationID,\r\n        };\r\n\r\n        console.log(\"发送获取游戏列表的消息:\", request);\r\n\r\n        var onMessage = function(res){\r\n            if(res.errno == 0){\r\n                callback(res.data);\r\n            }\r\n        }\r\n\r\n        Game.NetManager.sendMsg(\"GET\", GameConfig.GetGameList, request, onMessage);\r\n    },\r\n\r\n    //发送过关时间的消息给服务器\r\n    SendPassLevelTime: function(level_id, time){\r\n        cc.log(\"SendPassLevelTime:\",level_id,time);\r\n\r\n        var request = {\r\n            user_id: Game.GlobalVar.userID.toString(),\r\n            level_id: level_id.toString(),\r\n            time: time.toString(),\r\n            game_id: GameConfig.GameID.toString()\r\n        };\r\n\r\n        var onMessage = function(data){\r\n            cc.log(\"SendPassLevelTime == onMessage\", data);\r\n        }\r\n\r\n        Game.NetManager.sendMsg(\"POST\", GameConfig.SendPassLevelTimeAddr, request, onMessage);\r\n    },\r\n\r\n    //获取某个关卡内通关用时最少的玩家\r\n    SendGetPassLevelMinTime(level_id){\r\n        cc.log(\"SendGetPassLevelMinTime:\",level_id);\r\n\r\n        var request = {\r\n            level_id: level_id.toString(),\r\n            game_id: GameConfig.GameID.toString()\r\n        };\r\n\r\n\r\n        var onMessage = function(res){\r\n            cc.log(\"SendGetPassLevelMinTime == onMessage\", res);\r\n            if(res.errno == 0){\r\n                Game.EventCenter.DispatchEvent(Game.MessageType.Game_MIN_TIME_REP, res.data.time);\r\n            }else if(res.errno == 2007){\r\n                Game.EventCenter.DispatchEvent(Game.MessageType.Game_MIN_TIME_REP_NO_DATA);\r\n            }\r\n        }\r\n\r\n        Game.NetManager.sendMsg(\"Get\", GameConfig.GetPassLevelTimeAddr, request, onMessage);\r\n    },\r\n\r\n    //发送获取配置的消息\r\n    SendGetConfigMessage(){\r\n        cc.log(\"SendGetConfigMessage:\");\r\n\r\n        var request = {\r\n            game_id: GameConfig.GameID.toString()\r\n        };\r\n\r\n        var onMessage = function(res){\r\n            cc.log(\"SendGetConfigMessage == onMessage\", res);\r\n            if(res.errno == 0){\r\n                GameLocalData.SaveConfigData(res.data);\r\n            }else if(res.errno == 2007){\r\n            }\r\n        }\r\n\r\n        Game.NetManager.sendMsg(\"Get\", GameConfig.GetConfigAddr, request, onMessage);\r\n    },\r\n\r\n    //发送获取游戏广告的的消息\r\n    SendGetGameAdMessage(gid, callback){\r\n        cc.log(\"SendGetGameAdMessage:\");\r\n\r\n        var request = {\r\n            gid: gid,\r\n        };\r\n\r\n        var onMessage = function(res){\r\n            cc.log(\"SendGetConfigMessage == onMessage\", res);\r\n            if(res.errno == 0){\r\n                callback(res.data);\r\n            }\r\n        }\r\n\r\n        Game.NetManager.sendMsg(\"Get\", GameConfig.GetGameADAddr, request, onMessage);\r\n    },\r\n};"]}