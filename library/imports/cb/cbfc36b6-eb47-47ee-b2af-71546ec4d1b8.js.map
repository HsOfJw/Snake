{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\DiCiMgr.js"],"names":["Util","require","DiCiNode","cc","Class","extends","Component","diciNodeVec","diciGIDVec","ctor","GenerateDiCi","myParent","diciGID","Game","MapUtil","GetDiCiGID","i","length","gidobj","gid","pos","ConvertGIDToPos","diciNode","setPosition","addChild","push","direction","rotation","GetAllDiCiNode","GetAllDiCiGID","RemoveDiCiByGID","destroy","splice","Clear"],"mappings":";;;;;;AAAA,IAAIA,OAAOC,QAAQ,MAAR,CAAX;AACA,IAAIC,WAAWD,QAAQ,uBAAR,CAAf;;AAEAE,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,iBAAa,IAHR;AAILC,gBAAY,IAJP;;AAMLC,QANK,kBAMC,CACL,CAPI;AASLC,gBATK,wBASQC,QATR,EASiB;AAClB,YAAG,CAACA,QAAJ,EAAa;AACT;AACH;;AAED,aAAKH,UAAL,GAAkB,EAAlB;AACA,aAAKD,WAAL,GAAmB,EAAnB;;AAEA,YAAIK,UAAUC,KAAKC,OAAL,CAAaC,UAAb,EAAd;AACA,aAAI,IAAIC,IAAI,CAAZ,EAAcA,IAAIJ,QAAQK,MAA1B,EAAkCD,GAAlC,EAAsC;AAClC,gBAAIE,SAASN,QAAQI,CAAR,CAAb;;AAEA,gBAAGE,OAAOC,GAAP,GAAa,CAAhB,EAAkB;AACd,oBAAIC,MAAMP,KAAKC,OAAL,CAAaO,eAAb,CAA6BH,OAAOC,GAApC,CAAV;AACA,oBAAIG,WAAW,IAAIpB,QAAJ,EAAf;AACAoB,yBAASC,WAAT,CAAqBH,GAArB;AACAE,yBAASH,GAAT,GAAeD,OAAOC,GAAtB;AACAR,yBAASa,QAAT,CAAkBF,QAAlB,EAA4B,EAA5B;AACA,qBAAKf,WAAL,CAAiBkB,IAAjB,CAAsBH,QAAtB;AACA,qBAAKd,UAAL,CAAgBiB,IAAhB,CAAqBP,OAAOC,GAA5B;AACA,wBAAOD,OAAOQ,SAAd;AACI,yBAAK,CAAL;AACA;AACIJ,qCAASK,QAAT,GAAoB,GAApB;AACA;AACH;AACD,yBAAK,CAAL;AACA;AACIL,qCAASK,QAAT,GAAoB,CAApB;AACA;AACH;AACD,yBAAK,CAAL;AACA;AACIL,qCAASK,QAAT,GAAoB,EAApB;AACA;AACH;AACD,yBAAK,CAAL;AACA;AACIL,qCAASK,QAAT,GAAoB,CAAC,EAArB;AACA;AACH;AApBL;AAsBH;AAEJ;AACJ,KAtDI;AAwDLC,kBAxDK,4BAwDW;AACZ,eAAO,KAAKrB,WAAZ;AACH,KA1DI;AA4DLsB,iBA5DK,2BA4DU;AACX,eAAO,KAAKrB,UAAZ;AACH,KA9DI;AAgELsB,mBAhEK,2BAgEWX,GAhEX,EAgEe;AAChB,aAAI,IAAIH,IAAI,CAAZ,EAAcA,IAAI,KAAKT,WAAL,CAAiBU,MAAnC,EAA0CD,GAA1C,EAA+C;AAC3C,gBAAG,KAAKT,WAAL,CAAiBS,CAAjB,EAAoBG,GAApB,IAA2BA,GAA9B,EAAkC;AAC9B,qBAAKZ,WAAL,CAAiBS,CAAjB,EAAoBe,OAApB;AACA,qBAAKxB,WAAL,CAAiByB,MAAjB,CAAwBhB,CAAxB,EAA2B,CAA3B;AACA;AACH;AACJ;;AAED,aAAI,IAAIA,IAAI,CAAZ,EAAcA,IAAI,KAAKR,UAAL,CAAgBS,MAAlC,EAAyCD,GAAzC,EAA8C;AAC1C,gBAAG,KAAKR,UAAL,CAAgBQ,CAAhB,KAAsBG,GAAzB,EAA6B;AACzB,qBAAKX,UAAL,CAAgBwB,MAAhB,CAAuBhB,CAAvB,EAA0B,CAA1B;AACA;AACH;AACJ;;AAED;AACH,KAjFI;AAmFLiB,SAnFK,mBAmFE;AACH,YAAG,KAAK1B,WAAR,EAAoB;AAChB,iBAAKA,WAAL,CAAiBU,MAAjB,GAA0B,CAA1B;AACH;AACD,YAAG,KAAKT,UAAR,EAAmB;AACf,iBAAKA,UAAL,CAAgBS,MAAhB,GAAyB,CAAzB;AACH;AACJ;AA1FI,CAAT","file":"DiCiMgr.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["var Util = require('Util');\r\nvar DiCiNode = require('./gameobject/DiCiNode');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    diciNodeVec: null,\r\n    diciGIDVec: null,\r\n\r\n    ctor(){\r\n    },\r\n\r\n    GenerateDiCi(myParent){\r\n        if(!myParent){\r\n            return;\r\n        }\r\n\r\n        this.diciGIDVec = [];\r\n        this.diciNodeVec = [];\r\n\r\n        var diciGID = Game.MapUtil.GetDiCiGID();\r\n        for(var i = 0;i < diciGID.length; i++){\r\n            var gidobj = diciGID[i];\r\n\r\n            if(gidobj.gid > 0){\r\n                var pos = Game.MapUtil.ConvertGIDToPos(gidobj.gid);\r\n                var diciNode = new DiCiNode();\r\n                diciNode.setPosition(pos);\r\n                diciNode.gid = gidobj.gid;\r\n                myParent.addChild(diciNode, 10);\r\n                this.diciNodeVec.push(diciNode);\r\n                this.diciGIDVec.push(gidobj.gid);\r\n                switch(gidobj.direction){\r\n                    case 1:\r\n                    {\r\n                        diciNode.rotation = 180;\r\n                        break;\r\n                    }\r\n                    case 2:\r\n                    {\r\n                        diciNode.rotation = 0;\r\n                        break;\r\n                    }\r\n                    case 3:\r\n                    {\r\n                        diciNode.rotation = 90;\r\n                        break;\r\n                    }\r\n                    case 4:\r\n                    {\r\n                        diciNode.rotation = -90;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    GetAllDiCiNode(){\r\n        return this.diciNodeVec;\r\n    },\r\n\r\n    GetAllDiCiGID(){\r\n        return this.diciGIDVec;\r\n    },\r\n\r\n    RemoveDiCiByGID(gid){\r\n        for(var i = 0;i < this.diciNodeVec.length;i ++){\r\n            if(this.diciNodeVec[i].gid == gid){\r\n                this.diciNodeVec[i].destroy();\r\n                this.diciNodeVec.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n\r\n        for(var i = 0;i < this.diciGIDVec.length;i ++){\r\n            if(this.diciGIDVec[i] == gid){\r\n                this.diciGIDVec.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n\r\n        // Game.MapUtil.RemoveAppleGID(gid);\r\n    },\r\n\r\n    Clear(){\r\n        if(this.diciNodeVec){\r\n            this.diciNodeVec.length = 0;\r\n        }\r\n        if(this.diciGIDVec){\r\n            this.diciGIDVec.length = 0;\r\n        }\r\n    }\r\n});\r\n"]}