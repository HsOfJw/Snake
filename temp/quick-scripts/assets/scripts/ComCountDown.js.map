{"version":3,"sources":["ComCountDown.js"],"names":["Util","require","cc","Class","extends","Component","properties","bgSprite","SpriteFrame","numSprite","goSprite","index","play","callback","node","self","countDownNode","CreateSpriteWithFrame","zIndex","y","winSize","height","addChild","numNode","action","createCountDownAction","schedule","length","runAction","sequence","moveTo","removeSelf","unschedule","SetNodeSprteFrame","Game","AudioManager","playDaojishiSound","moveAction","callfunc","callFunc"],"mappings":";;;;;;AAAA,IAAIA,OAAOC,QAAQ,MAAR,CAAX;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACTC,kBAAUL,GAAGM,WADJ;;AAGTC,mBAAW,CAACP,GAAGM,WAAJ,CAHF;;AAKTE,kBAAUR,GAAGM;AALJ,KAHP;;AAWLG,WAAO,IAXF;;AAaLC,QAbK,gBAaAC,QAbA,EAaU;AACX,YAAG,CAAC,KAAKC,IAAT,EAAc;AACV;AACH;;AAED,YAAIC,OAAO,IAAX;;AAEA,aAAKJ,KAAL,GAAa,CAAb;;AAEA,YAAIK,gBAAgBhB,KAAKiB,qBAAL,CAA2B,eAA3B,EAA4C,KAAKV,QAAjD,CAApB;;AAEA,YAAG,CAACS,aAAJ,EAAkB;AACd;AACH;;AAEDA,sBAAcE,MAAd,GAAuB,EAAvB;AACAF,sBAAcG,CAAd,GAAkBjB,GAAGkB,OAAH,CAAWC,MAAX,GAAoBL,cAAcK,MAAd,GAAuB,GAA7D;AACA,aAAKP,IAAL,CAAUQ,QAAV,CAAmBN,aAAnB;;AAEA,YAAIO,UAAUvB,KAAKiB,qBAAL,CAA2B,SAA3B,EAAsC,KAAKR,SAAL,CAAe,KAAKE,KAAL,EAAf,CAAtC,CAAd;;AAEAK,sBAAcM,QAAd,CAAuBC,OAAvB;;AAEA,YAAIC,SAAS,KAAKC,qBAAL,CAA2B,YAAU;AAC9CV,iBAAKW,QAAL,CAAc,YAAU;AACpB,oBAAGX,KAAKJ,KAAL,IAAeI,KAAKN,SAAL,CAAekB,MAAjC,EAAwC;AACpCX,kCAAcY,SAAd,CAAwB,IAAI1B,GAAG2B,QAAP,CAAgB,IAAI3B,GAAG4B,MAAP,CAAc,GAAd,EAAmB,CAAnB,EAAsB5B,GAAGkB,OAAH,CAAWC,MAAX,GAAoBL,cAAcK,MAAd,GAAuB,GAAjE,CAAhB,EAAuF,IAAInB,GAAG6B,UAAP,CAAkB,IAAlB,CAAvF,CAAxB;AACAhB,yBAAKiB,UAAL,CAAgB,WAAhB;AACAnB;AACA;AACH;AACDb,qBAAKiC,iBAAL,CAAuBV,OAAvB,EAAgC,KAAKd,SAAL,CAAe,KAAKE,KAAL,EAAf,CAAhC;AACH,aARD,EAQG,CARH,EAQM,WARN;AASAuB,iBAAKC,YAAL,CAAkBC,iBAAlB;AACH,SAXY,CAAb;;AAaApB,sBAAcY,SAAd,CAAwBJ,MAAxB;AACH,KAlDI;AAoDLC,yBApDK,iCAoDiBZ,QApDjB,EAoD0B;AAC3B,YAAIwB,aAAa,IAAInC,GAAG4B,MAAP,CAAc,GAAd,EAAmB,CAAnB,EAAsB,CAAtB,CAAjB;AACA,YAAIQ,WAAW,IAAIpC,GAAGqC,QAAP,CAAgB1B,QAAhB,CAAf;;AAEA,eAAOX,GAAG2B,QAAH,CAAYQ,UAAZ,EAAwBC,QAAxB,CAAP;AACH;AAzDI;AA0DL;AA1DJ","file":"ComCountDown.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["var Util = require(\"Util\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n       bgSprite: cc.SpriteFrame,\r\n\r\n       numSprite: [cc.SpriteFrame],\r\n\r\n       goSprite: cc.SpriteFrame,\r\n    },\r\n\r\n    index: null,\r\n\r\n    play(callback) {\r\n        if(!this.node){\r\n            return;\r\n        }\r\n\r\n        var self = this;\r\n\r\n        this.index = 0;\r\n\r\n        var countDownNode = Util.CreateSpriteWithFrame(\"CountDownNode\", this.bgSprite);\r\n\r\n        if(!countDownNode){\r\n            return;\r\n        }\r\n\r\n        countDownNode.zIndex = 50;\r\n        countDownNode.y = cc.winSize.height + countDownNode.height * 0.5;\r\n        this.node.addChild(countDownNode);\r\n\r\n        var numNode = Util.CreateSpriteWithFrame(\"NumNode\", this.numSprite[this.index ++]);\r\n\r\n        countDownNode.addChild(numNode);\r\n\r\n        var action = this.createCountDownAction(function(){\r\n            self.schedule(function(){\r\n                if(self.index >=  self.numSprite.length){\r\n                    countDownNode.runAction(new cc.sequence(new cc.moveTo(0.2, 0, cc.winSize.height + countDownNode.height * 0.5), new cc.removeSelf(true)));\r\n                    self.unschedule(\"Countdown\");\r\n                    callback();\r\n                    return;\r\n                }\r\n                Util.SetNodeSprteFrame(numNode, this.numSprite[this.index ++]);\r\n            }, 1, \"Countdown\");\r\n            Game.AudioManager.playDaojishiSound();\r\n        });\r\n\r\n        countDownNode.runAction(action);\r\n    },\r\n\r\n    createCountDownAction(callback){\r\n        var moveAction = new cc.moveTo(0.2, 0, 0);\r\n        var callfunc = new cc.callFunc(callback);\r\n\r\n        return cc.sequence(moveAction, callfunc);\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}