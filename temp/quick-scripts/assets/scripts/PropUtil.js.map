{"version":3,"sources":["PropUtil.js"],"names":["GlobalVar","require","RedPacketList","PropList","propProbability","PropRotate","PropType","GetPropID","Game","curLevel","propID","probabilityCount","min","max","tempInt","prizesMap","prize","oddsMap","index","parseInt","Math","random","minNum","maxNum","module","exports"],"mappings":";;;;;;AAAA,IAAIA,YAAYC,QAAQ,WAAR,CAAhB;;AAEA,IAAIC,gBAAgB;AAChB,OAAG,KADa;AAEhB,OAAG;AAFa,CAApB;;AAMA,IAAIC,WAAW;AACX,OAAG,IADQ;AAEX,OAAG,IAFQ;AAGX,OAAG,GAHQ;AAIX,OAAG,GAJQ;AAKX,OAAG,MALQ;AAMX,OAAG,KANQ;AAOX,OAAG,KAPQ;AAQX,OAAG;AARQ,CAAf;;AAWA,IAAIC,kBAAkB;AAClB,OAAG,EADe;AAElB,OAAG,EAFe;AAGlB,OAAG,EAHe;AAIlB,OAAG,EAJe;AAKlB,OAAG,EALe;AAMlB,OAAG,IANe;AAOlB,OAAG,IAPe;AAQlB,OAAG;AARe,CAAtB;;AAWA,IAAIC,aAAa;AACb,OAAG,GADU;AAEb,OAAG,EAFU;AAGb,OAAG,GAHU;AAIb,OAAG,GAJU;AAKb,OAAG,EALU;AAMb,OAAG,CANU;AAOb,OAAG,GAPU;AAQb,OAAG;AARU,CAAjB;;AAWA;AACA,IAAIC,WAAW;AACX,OAAG,CADQ;AAEX,OAAG,CAFQ;AAGX,OAAG,CAHQ;AAIX,OAAG,CAJQ;AAKX,OAAG,CALQ;AAMX,OAAG,CANQ;AAOX,OAAG,CAPQ;AAQX,OAAG;AARQ,CAAf;;AAWA,IAAIC,YAAY,SAAZA,SAAY,GAAU;AACtB,WAAO,CAAP;;AAEA,QAAGC,KAAKR,SAAL,CAAeS,QAAf,IAA2B,CAA9B,EAAgC;AAC5B,eAAO,CAAP;AACH;;AAED,QAAIC,SAAS,CAAb;;AAEA;AACA,QAAIC,mBAAmB,MAAvB;AACA;AACA,QAAIC,MAAM,KAAV;AACA;AACA,QAAIC,MAAM,KAAV;AACA,QAAIC,UAAU,CAAd;AACA;AACA,QAAIC,YAAY,EAAhB;AACA,SAAI,IAAIC,KAAR,IAAiBZ,eAAjB,EAAiC;AAC7B,YAAIa,UAAU,EAAd;AACAA,gBAAQL,GAAR,IAAeE,OAAf;AACAA,mBAAWV,gBAAgBY,KAAhB,CAAX;AACAC,gBAAQJ,GAAR,IAAeC,OAAf;;AAEAC,kBAAUC,KAAV,IAAmBC,OAAnB;AACH;;AAED;AACA,QAAIC,QAAQC,SAASC,KAAKC,MAAL,KAAgBV,gBAAzB,CAAZ;;AAEA,SAAI,IAAIK,KAAR,IAAiBZ,eAAjB,EAAiC;AAC7B,YAAIa,UAAUF,UAAUC,KAAV,CAAd;AACA,YAAIM,SAASL,QAAQL,GAAR,CAAb;AACA,YAAIW,SAASN,QAAQJ,GAAR,CAAb;AACA;AACA,YAAGS,UAAUJ,KAAV,IAAmBK,SAASL,KAA/B,EAAqC;AACjCR,qBAASS,SAASH,KAAT,CAAT;AACA;AACH;AACJ;;AAED,WAAON,MAAP;AACH,CA1CD;;AA4CAc,OAAOC,OAAP,GAAiB;AACblB,eAAWA,SADE;AAEbF,gBAAYA,UAFC;AAGbF,cAAUA,QAHG;AAIbG,cAAUA,QAJG;AAKbJ,mBAAeA;AALF,CAAjB","file":"PropUtil.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["var GlobalVar = require(\"GlobalVar\");\r\n\r\nvar RedPacketList = {\r\n    1: \"0.2\",\r\n    2: \"0.3\"\r\n};\r\n\r\n\r\nvar PropList = {\r\n    1: \"99\",\r\n    2: \"10\",\r\n    3: \"5\",\r\n    4: \"2\",\r\n    5: \"随机红包\",\r\n    6: \"0.2\",\r\n    7: \"0.1\",\r\n    8: \"继续努力\"\r\n};\r\n\r\nvar propProbability = {\r\n    1: 10,\r\n    2: 15,\r\n    3: 20,\r\n    4: 20,\r\n    5: 35,\r\n    6: 3900,\r\n    7: 6000,\r\n    8: 90000,\r\n}\r\n\r\nvar PropRotate = {\r\n    1: 135,\r\n    2: 90, \r\n    3: 180,\r\n    4: 225,\r\n    5: 45, \r\n    6: 0,\r\n    7: 270,\r\n    8: 315,\r\n};\r\n\r\n//1:钱, 2:红包 3: 啥也没\r\nvar PropType = {\r\n    1: 1,\r\n    2: 1, \r\n    3: 1,\r\n    4: 1,\r\n    5: 2, \r\n    6: 1,\r\n    7: 1,\r\n    8: 3,\r\n};\r\n\r\nvar GetPropID = function(){\r\n    return 7;\r\n\r\n    if(Game.GlobalVar.curLevel == 1){\r\n        return 7;\r\n    }\r\n\r\n    var propID = 0;\r\n\r\n    //定义中奖率分母 百分之\r\n    var probabilityCount = 100000;  \r\n    //最小概率值\r\n    var min = \"min\";  \r\n    //最大概率值\r\n    var max = \"max\";  \r\n    var tempInt = 0;  \r\n    //待中奖商品数组\r\n    var prizesMap = {};\r\n    for(var prize in propProbability){\r\n        var oddsMap = {};\r\n        oddsMap[min] = tempInt;\r\n        tempInt += propProbability[prize];\r\n        oddsMap[max] = tempInt;\r\n\r\n        prizesMap[prize] = oddsMap;\r\n    }\r\n\r\n    //随机一个数字\r\n    var index = parseInt(Math.random() * probabilityCount);  \r\n\r\n    for(var prize in propProbability){  \r\n        var oddsMap = prizesMap[prize];\r\n        var minNum = oddsMap[min];\r\n        var maxNum = oddsMap[max];\r\n        //校验index 再哪个商品概率中间\r\n        if(minNum <= index && maxNum > index){\r\n            propID = parseInt(prize);\r\n            break;\r\n        }\r\n    }\r\n\r\n    return propID;\r\n};\r\n\r\nmodule.exports = {\r\n    GetPropID: GetPropID,\r\n    PropRotate: PropRotate,\r\n    PropList: PropList,\r\n    PropType: PropType,\r\n    RedPacketList: RedPacketList,\r\n};\r\n\r\n"]}