{"version":3,"sources":["GameOverLayer.js"],"names":["Util","require","GlobalVar","LevelData","WXHelper","AdvertiseMgr","AdvertiseConfig","cc","Class","extends","Component","properties","histroyMaxScore","default","type","Node","newRecrod","lockyDrawUI","shareBtn","returnBtn","nextLevelBtn","continueBtn","restBtn","forHelpBtn","maskBg","moreGameLayout","cblPrefab","Prefab","rankingSprite","Sprite","onLoad","initLayer","start","self","tempTime","node","zIndex","initMoreGameUI","Game","SendMessage","SendGetGameListMessage","GameConfig","GameListID","data","gameList","redirect","i","length","item","instantiate","script","getComponent","setPosition","directInfo","img_url","game_id","name","app_id","hz_app_id","path","hz_path","setItemData","addChild","show","isNewRecrod","active","PopUpMgr","Show_ScaleEffect","refreshUI","showRankList","isWin","curLevel","LevelNum","sprite","spriteFrame","SpriteFrame","url","raw","hide","tex","Hide_ScaleEffect","RegBtnTouchBeginEvent","maskLayerClicked","bind","RegBtnClickEvent","shareBtnClicked","retureBtnClicked","nextLevelBtnClicked","continueClicked","restClicked","forHelpBtnClicked","ScreenAdaptation","GameOverRankList","isFail","SetNodeText","GetCurPassTime","newRecrodTime","newRecrodTextUI","getChildByName","lockyDrawBtnClicked","log","AudioManager","playButtonSound","EventCenter","DispatchEvent","MessageType","ClickedLockydrawBtn","Share","SceneMgr","switchScene","SceneType","StartScene","Join_Next_Level","IsWXContext","CreateVideoAd","ADConfig_Relive_Video","isFinish","Reset_Start_Game","selectBtnClicked","SelectScene","_updateSubDomainCanvas","window","sharedCanvas","undefined","initWithElement","handleLoadedTexture","update","dt","GameOverRankListUpdateTime","onDestroy"],"mappings":"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","file":"GameOverLayer.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\layer","sourcesContent":["var Util = require(\"Util\");\r\nvar GlobalVar = require(\"GlobalVar\");\r\nvar LevelData = require(\"LevelData\");\r\nvar WXHelper = require(\"WXHelper\");\r\nvar AdvertiseMgr = require(\"AdvertiseMgr\");\r\nvar AdvertiseConfig = require(\"AdvertiseConfig\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        //历史最高分\r\n        histroyMaxScore:{\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        //新纪录|别气馁\r\n        newRecrod:{\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        //抽奖按钮(暂时不用了)\r\n        lockyDrawUI:{\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // //选择关卡按钮\r\n        // selectBtn:{\r\n        //     default: null,\r\n        //     type: cc.Node\r\n        // },\r\n        //分享按钮\r\n        shareBtn:{\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        //返回按钮\r\n        returnBtn:{\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        //下一关按钮\r\n        nextLevelBtn:{\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        //继续挑战按钮\r\n        continueBtn:{\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        //休息一下按钮\r\n        restBtn:{\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        //求助好友按钮\r\n        forHelpBtn:{\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        maskBg:{\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        moreGameLayout: cc.Node,\r\n\r\n        cblPrefab: cc.Prefab,\r\n\r\n        rankingSprite:  cc.Sprite,//显示排行榜\r\n    },\r\n\r\n    onLoad(){\r\n        this.initLayer();\r\n    },\r\n\r\n    start () {\r\n        var self = this;\r\n        this.tempTime = 0;\r\n\r\n        this.rankingSprite.node.zIndex =1000;\r\n\r\n        this.initMoreGameUI();\r\n    },\r\n\r\n    initMoreGameUI(){\r\n        var self = this;\r\n\r\n        Game.SendMessage.SendGetGameListMessage(GameConfig.GameListID, function(data){\r\n            if(data){\r\n                let gameList = data.redirect;\r\n                for (let i = 0; i < gameList.length, i < 3; i++) {\r\n                    let item = cc.instantiate(self.cblPrefab);\r\n                    let script = item.getComponent(\"PanelItem\");\r\n                    item.setPosition(0, 0);\r\n                    if (script) {\r\n                        let directInfo = {\r\n                            img_url: gameList[i].img_url,\r\n                            game_id: gameList[i].game_id,\r\n                            name: gameList[i].name,\r\n                            app_id: data.hz_app_id,\r\n                            path: data.hz_path\r\n                        };\r\n                        script.setItemData(directInfo);\r\n                    }\r\n                    self.moreGameLayout.addChild(item);\r\n                }\r\n            }\r\n        });\r\n    },\r\n\r\n    show(isNewRecrod){\r\n        this.node.active = true;\r\n        this.maskBg.active = true;\r\n        this.rankingSprite.node.active = true;\r\n        Game.PopUpMgr.Show_ScaleEffect(this.node);\r\n\r\n        this.refreshUI(isNewRecrod);\r\n        this.showRankList();\r\n\r\n        if(Game.GlobalVar.isWin){\r\n            if(Game.GlobalVar.curLevel == GameConfig.LevelNum){\r\n                if(this.nextLevelBtn){\r\n                    var sprite = this.nextLevelBtn.getComponent(cc.Sprite);\r\n                    if(sprite){\r\n                        sprite.spriteFrame = new cc.SpriteFrame(cc.url.raw(\"resources/gamescene/beContinued.png\"));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    hide(){\r\n        this.tex = null;\r\n        this.tempTime = 0;\r\n        this.maskBg.active = false;\r\n\r\n        this.rankingSprite.node.active = false;\r\n\r\n        Game.PopUpMgr.Hide_ScaleEffect(this.node);\r\n    },\r\n\r\n    initLayer(){\r\n        var self = this;\r\n\r\n        this.maskBg.zIndex = 100;\r\n        this.node.zIndex = 101;\r\n\r\n        // this.lockyDrawUI.on(cc.Node.EventType.TOUCH_END,function(event){\r\n        //     self.lockyDrawBtnClicked(event);\r\n        // });\r\n        Util.RegBtnTouchBeginEvent(this.maskBg, this.maskLayerClicked.bind(this));\r\n        // Util.RegBtnClickEvent(this.selectBtn, this.selectBtnClicked.bind(this));\r\n        Util.RegBtnClickEvent(this.shareBtn, this.shareBtnClicked.bind(this));\r\n        Util.RegBtnClickEvent(this.returnBtn, this.retureBtnClicked.bind(this));\r\n        Util.RegBtnClickEvent(this.nextLevelBtn, this.nextLevelBtnClicked.bind(this));\r\n        Util.RegBtnClickEvent(this.continueBtn, this.continueClicked.bind(this));\r\n        Util.RegBtnClickEvent(this.restBtn, this.restClicked.bind(this));\r\n        Util.RegBtnClickEvent(this.forHelpBtn, this.forHelpBtnClicked.bind(this));\r\n\r\n        Util.ScreenAdaptation(this.rankingSprite.node);\r\n        Util.ScreenAdaptation(this.maskBg);\r\n    },\r\n\r\n    showRankList(){\r\n        this.tex = WXHelper.GameOverRankList();\r\n    },\r\n\r\n    refreshUI(isNewRecrod, isFail){\r\n        if(this.histroyMaxScore)\r\n            Util.SetNodeText(this.histroyMaxScore, LevelData.GetCurPassTime());\r\n        if(isNewRecrod && this.newRecrod){\r\n            this.newRecrod.active = true;\r\n            var newRecrodTime = LevelData.GetCurPassTime();\r\n            var newRecrodTextUI = this.newRecrod.getChildByName(\"newScore\");\r\n            Util.SetNodeText(newRecrodTextUI, newRecrodTime);\r\n        }else{\r\n            this.newRecrod.active = false;\r\n        }\r\n\r\n        if(isFail){\r\n            //不要气馁\r\n            this.newRecrod.active = true;\r\n        }\r\n    },\r\n\r\n    lockyDrawBtnClicked(){\r\n        cc.log(\"lockyDrawBtnClicked\");\r\n\r\n        Game.AudioManager.playButtonSound();\r\n\r\n        Game.EventCenter.DispatchEvent(Game.MessageType.ClickedLockydrawBtn);\r\n    },\r\n\r\n    shareBtnClicked(){\r\n        cc.log(\"shareBtnClicked\");\r\n\r\n        Game.AudioManager.playButtonSound();\r\n\r\n        WXHelper.Share();\r\n    },\r\n\r\n    retureBtnClicked(){\r\n        Game.AudioManager.playButtonSound();\r\n\r\n        Game.SceneMgr.switchScene(Game.SceneType.StartScene);\r\n    },\r\n\r\n    nextLevelBtnClicked(){\r\n        Game.AudioManager.playButtonSound();\r\n\r\n        Game.EventCenter.DispatchEvent(Game.MessageType.Join_Next_Level);\r\n    },\r\n\r\n    continueClicked(){\r\n        cc.log(\"continueClicked\");\r\n        \r\n        //创建视频广告\r\n        if(WXHelper.IsWXContext()){\r\n            AdvertiseMgr.CreateVideoAd(AdvertiseConfig.ADConfig_Relive_Video, function(isFinish){\r\n                if(isFinish){\r\n                    Game.EventCenter.DispatchEvent(Game.MessageType.Reset_Start_Game);\r\n                }else{\r\n                    // WXHelper.ShowToast(GameConfig.Game_Tip_2);\r\n                }\r\n            });\r\n        }else{\r\n            Game.EventCenter.DispatchEvent(Game.MessageType.Reset_Start_Game);\r\n        }\r\n        \r\n    },\r\n\r\n    restClicked(){\r\n        Game.SceneMgr.switchScene(Game.SceneType.StartScene);\r\n    },\r\n\r\n    forHelpBtnClicked(){\r\n        cc.log(\"forHelpBtnClicked\");\r\n\r\n        WXHelper.Share();\r\n    },\r\n\r\n    selectBtnClicked(){\r\n        Game.AudioManager.playButtonSound();\r\n\r\n        Game.SceneMgr.switchScene(Game.SceneType.SelectScene);\r\n    },\r\n\r\n    maskLayerClicked(){\r\n        return true;\r\n    },\r\n\r\n    // 刷新子域的纹理\r\n    _updateSubDomainCanvas() {\r\n        if (window.sharedCanvas != undefined && this.tex && this.rankingSprite) {\r\n            this.tex.initWithElement(window.sharedCanvas);\r\n            this.tex.handleLoadedTexture();\r\n            this.rankingSprite.spriteFrame = new cc.SpriteFrame(this.tex);\r\n        }\r\n    },\r\n\r\n    update (dt) {\r\n        if(this.node.active == false){\r\n            return;\r\n        }\r\n\r\n        this.tempTime += dt;\r\n\r\n        if(this.tempTime >= GameConfig.GameOverRankListUpdateTime){\r\n            this.tempTime = 0;\r\n            this._updateSubDomainCanvas();\r\n        }\r\n    },\r\n\r\n    onDestroy(){\r\n        cc.log(\"WinLayer onDestroy\");\r\n    },\r\n\r\n});\r\n"]}