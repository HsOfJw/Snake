{"version":3,"sources":["JJCYView.js"],"names":["Util","require","WXHelper","JJCYView","cc","Class","jjchNode","Node","jjchSprite","Sprite","isShow","tex","ctor","tempTime","init","show","JJCYPlayer","setView","view","getComponent","_updateSubDomainCanvas","window","sharedCanvas","undefined","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","update","dt","GameConfig","JJCYPlayerUpdateTime"],"mappings":";;;;;;AAAA,IAAIA,OAAOC,QAAQ,MAAR,CAAX;AACA,IAAIC,WAAWD,QAAQ,UAAR,CAAf;;AAEA,IAAIE,WAAWC,GAAGC,KAAH,CAAS;;AAEpBC,cAAUF,GAAGG,IAFO;AAGpBC,gBAAYJ,GAAGK,MAHK;;AAKpBC,YAAQ,IALY;;AAOpBC,SAAK,IAPe;;AASpBC,QAToB,kBASd;AACF,aAAKF,MAAL,GAAc,KAAd;;AAEA,aAAKG,QAAL,GAAgB,CAAhB;;AAEA,aAAKC,IAAL;AACH,KAfmB;AAiBpBC,QAjBoB,kBAiBZ;AACJ,aAAKL,MAAL,GAAc,IAAd;AACH,KAnBmB;AAqBpBI,QArBoB,kBAqBd;AACF,aAAKH,GAAL,GAAWT,SAASc,UAAT,EAAX;AACH,KAvBmB;AAyBpBC,WAzBoB,mBAyBZC,IAzBY,EAyBP;AACT,YAAGA,IAAH,EAAQ;AACJ,iBAAKZ,QAAL,GAAgBY,IAAhB;;AAEA,iBAAKV,UAAL,GAAkBU,KAAKC,YAAL,CAAkBf,GAAGK,MAArB,CAAlB;AACA;;AAEA;AACA;AACH;AACJ,KAnCmB;;;AAqCpB;AACAW,0BAtCoB,oCAsCK;AACrB,YAAIC,OAAOC,YAAP,IAAuBC,SAA3B,EAAsC;AAClC,gBAAG,KAAKZ,GAAR,EAAY;AACR,qBAAKA,GAAL,CAASa,eAAT,CAAyBH,OAAOC,YAAhC;AACA,qBAAKX,GAAL,CAASc,mBAAT;AACA,qBAAKjB,UAAL,CAAgBkB,WAAhB,GAA8B,IAAItB,GAAGuB,WAAP,CAAmB,KAAKhB,GAAxB,CAA9B;AACH;AACJ;AACJ,KA9CmB;AAiDpBiB,UAjDoB,kBAiDbC,EAjDa,EAiDV;AACN,YAAG,KAAKnB,MAAL,IAAe,KAAlB,EAAwB;AACpB;AACH;;AAED,aAAKG,QAAL,IAAiBgB,EAAjB;;AAEA,YAAG,KAAKhB,QAAL,IAAiBiB,WAAWC,oBAA/B,EAAoD;AAChD,iBAAKlB,QAAL,GAAgB,CAAhB;AACA,iBAAKO,sBAAL;AACH;AACJ;AA5DmB,CAAT,CAAf","file":"JJCYView.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\layer","sourcesContent":["var Util = require(\"Util\");\r\nvar WXHelper = require(\"WXHelper\");\r\n\r\nvar JJCYView = cc.Class({\r\n\r\n    jjchNode: cc.Node,\r\n    jjchSprite: cc.Sprite,\r\n\r\n    isShow: null,\r\n\r\n    tex: null,\r\n\r\n    ctor(){\r\n        this.isShow = false;\r\n\r\n        this.tempTime = 0;\r\n\r\n        this.init();\r\n    },\r\n\r\n    show () {\r\n        this.isShow = true;\r\n    },\r\n\r\n    init(){\r\n        this.tex = WXHelper.JJCYPlayer();\r\n    },\r\n\r\n    setView(view){\r\n        if(view){\r\n            this.jjchNode = view;\r\n\r\n            this.jjchSprite = view.getComponent(cc.Sprite);\r\n            // Util.ScreenAdaptation(this.jjchNode);\r\n\r\n            // this.jjchNode.width = cc.winSize.width;\r\n            // this.jjchNode.height = cc.winSize.height;\r\n        }\r\n    },\r\n        \r\n    // 刷新子域的纹理\r\n    _updateSubDomainCanvas() {\r\n        if (window.sharedCanvas != undefined) {\r\n            if(this.tex){\r\n                this.tex.initWithElement(window.sharedCanvas);\r\n                this.tex.handleLoadedTexture();\r\n                this.jjchSprite.spriteFrame = new cc.SpriteFrame(this.tex);\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    update(dt){\r\n        if(this.isShow == false){\r\n            return;\r\n        }\r\n\r\n        this.tempTime += dt;\r\n\r\n        if(this.tempTime >= GameConfig.JJCYPlayerUpdateTime){\r\n            this.tempTime = 0;\r\n            this._updateSubDomainCanvas();\r\n        }\r\n    }\r\n});\r\n"]}