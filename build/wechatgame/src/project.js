require=function a(s,c,r){function l(t,e){if(!c[t]){if(!s[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(h)return h(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var o=c[t]={exports:{}};s[t][0].call(o.exports,function(e){return l(s[t][1][e]||e)},o,o.exports,a,s,c,r)}return c[t].exports}for(var h="function"==typeof require&&require,e=0;e<r.length;e++)l(r[e]);return l}({AdvertiseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b98d1bpMFRNm5b4PJxgT1gg","AdvertiseConfig"),t.exports={ADConfig_HomePage_Bottom:{description:"首页底部",adUnitID:"adunit-2bbbd39b0d62edc7",show:{left:.5,bottom:0,width:300}},ADConfig_Game_Top:{description:"游戏顶部",adUnitID:"adunit-d76010d6da86d08c",show:{left:.5,top:0,width:100}},ADConfig_Relive_Video:{description:"复活视频",adUnitID:"adunit-4af862f318198d73"}},cc._RF.pop()},{}],AdvertiseMgr:[function(e,t,i){"use strict";cc._RF.push(t,"83b8bElR21Os5AFCR9Hx8k+","AdvertiseMgr");var c=e("WXHelper");t.exports={bannerAd:null,CreateBannerAd:function(n){if(0!=c.IsWXContext()&&n){cc.log("CreateBannerAd------------------------------------");var o=Game.SystemInfo.windowWidth,a=Game.SystemInfo.windowHeight,s=wx.createBannerAd({adUnitId:n.adUnitID,style:{left:0,top:0,width:n.show.width}});s.onResize(function(e){var t=n.show.top,i=o/2-.5*s.style.realWidth;null==n.show.top&&(t=a-s.style.realHeight),s.style.left=i,s.style.top=t,console.log(i),console.log(t),console.log(e.width,e.height),console.log(s.style.realWidth,s.style.realHeight)}),s.show(),this.bannerAd=s}},DestroyBannerAd:function(){this.bannerAd&&(this.bannerAd.hide(),this.bannerAd.destroy())},CreateVideoAd:function(e,i){if(0!=c.IsWXContext()&&e){var t=wx.createRewardedVideoAd({adUnitId:e.adUnitID});t.load().then(function(){return t.show()}).catch(function(e){return console.log(e.errMsg)}),t.onClose(function(e){cc.log(e);var t=!1;t=!!(e&&e.isEnded||void 0===e),i(t)})}}},cc._RF.pop()},{WXHelper:"WXHelper"}],AppleMgr:[function(e,t,i){"use strict";cc._RF.push(t,"2bb4bnKlVpGMIJV6BfJYDEE","AppleMgr");e("Util");var s=e("./gameobject/AppleNode");cc.Class({extends:cc.Component,appleNodeVec:null,appleGIDVec:null,ctor:function(){},GenerateApple:function(e){if(e){this.appleGIDVec=[],this.appleNodeVec=[];for(var t=Game.MapUtil.GetAppleGID(),i=0;i<t.length;i++){var n=t[i];if(0<n){var o=Game.MapUtil.ConvertGIDToPos(n),a=new s("AppleNode");a.setPosition(o),a.gid=n,e.addChild(a),this.appleNodeVec.push(a),this.appleGIDVec.push(n)}}}},GetAllAppleNode:function(){return this.appleNodeVec},GetAllAppleGID:function(){return this.appleGIDVec},RemoveAppleByGID:function(e){for(var t=0;t<this.appleNodeVec.length;t++)if(this.appleNodeVec[t].gid==e){this.appleNodeVec[t].destroy(),this.appleNodeVec.splice(t,1);break}for(t=0;t<this.appleGIDVec.length;t++)if(this.appleGIDVec[t]==e){this.appleGIDVec.splice(t,1);break}Game.MapUtil.RemoveAppleGID(e)},Clear:function(){this.appleNodeVec&&(this.appleNodeVec.length=0),this.appleGIDVec&&(this.appleGIDVec.length=0)}}),cc._RF.pop()},{"./gameobject/AppleNode":"AppleNode",Util:"Util"}],AppleNode:[function(e,t,i){"use strict";cc._RF.push(t,"083cdRqpvNCgq14DqHbQ7Kf","AppleNode");var n=e("Entity");cc.Class({extends:n,ctor:function(){this.setName("AppleNode"),this.sprite.spriteFrame.setTexture(cc.url.raw("resources/gamescene/apple.png"))}}),cc._RF.pop()},{Entity:"Entity"}],AudioManager:[function(e,t,i){"use strict";cc._RF.push(t,"101a5BQC1xPJ5Qj/iDP4Ijc","AudioManager"),window.Game=window.Game||{},cc.Class({extends:cc.Component,properties:{beici_Sound:{url:cc.AudioClip,default:null},background_music:{url:cc.AudioClip,default:null},daojishi_Sound:{url:cc.AudioClip,default:null},dirClick_Sound:{url:cc.AudioClip,default:null},eatApple_Sound:{url:cc.AudioClip,default:null},fail_Sound:{url:cc.AudioClip,default:null},win_Sound:{url:cc.AudioClip,default:null},button_Sound:{url:cc.AudioClip,default:null},pushStone_Sound:{url:cc.AudioClip,default:null},getMoney_Sound:{url:cc.AudioClip,default:null}},isOpenSound:null,curBgm:null,playEffect:function(e){GameConfig.SoundSwitch&&this.isOpenSound&&cc.audioEngine.play(e,!1,1)},playBackgroundMusic:function(e){if(GameConfig.SoundSwitch)return this.isOpenSound?cc.audioEngine.play(e,!0,1):null},playPushStoneSound:function(){this.playEffect(this.pushStone_Sound)},playDirectionSound:function(){this.playEffect(this.dirClick_Sound)},playBeiCiSound:function(){this.playEffect(this.beici_Sound)},playDaojishiSound:function(){this.playEffect(this.daojishi_Sound)},playEatAppleSound:function(){this.playEffect(this.eatApple_Sound)},playFailSound:function(){this.playEffect(this.fail_Sound)},playWinSound:function(){this.playEffect(this.win_Sound)},playButtonSound:function(){this.playEffect(this.button_Sound)},playGetMoneySound:function(){this.playEffect(this.getMoney_Sound)},playBackgroundSound:function(){null==this.curBgm&&(this.curBgm=this.playBackgroundMusic(this.background_music))},stopBackgroundSound:function(){null!=this.curBgm&&(cc.audioEngine.stop(this.curBgm),this.curBgm=null)},pauseBackgroundSound:function(){null!=this.curBgm&&cc.audioEngine.pause(this.curBgm)},resumeBackgroundSound:function(){null!=this.curBgm&&cc.audioEngine.resume(this.curBgm)},openSound:function(){this.isOpenSound=!0,this.resumeBackgroundSound()},closeSound:function(){this.isOpenSound=!1,this.pauseBackgroundSound()},onLoad:function(){cc.game.addPersistRootNode(this.node),this.isOpenSound=!0,Game.AudioManager=this},start:function(){}}),cc._RF.pop()},{}],BaseNode:[function(e,t,i){"use strict";cc._RF.push(t,"0f82dYrCfFLG7cop4eDAxRY","BaseNode"),cc.Class({extends:cc.Node,myDropDirtyFlag:null,myChangedDirtyFlag:null,myDeleteDirtyFlag:null,ctor:function(){this.setName("BaseNode"),this.myDropDirtyFlag=!1,this.myChangedDirtyFlag=!1,this.myDeleteDirtyFlag=!1},setMyDropDirtyFlag:function(e){this.myDropDirtyFlag=e},setMyChangedDirtyFlag:function(e){this.myChangedDirtyFlag=e},setMyDeleteDirtyFlag:function(e){this.myDeleteDirtyFlag=e},doEnter:function(){},doExit:function(){}}),cc._RF.pop()},{}],ComCountDown:[function(e,t,i){"use strict";cc._RF.push(t,"e4796nHEwhB27mOacWYhXF5","ComCountDown");var a=e("Util");cc.Class({extends:cc.Component,properties:{bgSprite:cc.SpriteFrame,numSprite:[cc.SpriteFrame],goSprite:cc.SpriteFrame},index:null,play:function(e){if(this.node){var t=this;this.index=0;var i=a.CreateSpriteWithFrame("CountDownNode",this.bgSprite);if(i){i.zIndex=50,i.y=cc.winSize.height+.5*i.height,this.node.addChild(i);var n=a.CreateSpriteWithFrame("NumNode",this.numSprite[this.index++]);i.addChild(n);var o=this.createCountDownAction(function(){t.schedule(function(){if(t.index>=t.numSprite.length)return i.runAction(new cc.sequence(new cc.moveTo(.2,0,cc.winSize.height+.5*i.height),new cc.removeSelf(!0))),t.unschedule("Countdown"),void e();a.SetNodeSprteFrame(n,this.numSprite[this.index++])},1,"Countdown"),Game.AudioManager.playDaojishiSound()});i.runAction(o)}}},createCountDownAction:function(e){var t=new cc.moveTo(.2,0,0),i=new cc.callFunc(e);return cc.sequence(t,i)}}),cc._RF.pop()},{Util:"Util"}],ConstDefine:[function(e,t,i){"use strict";cc._RF.push(t,"5f2f61RYTlGro7B58lEhfGZ","ConstDefine");t.exports={MoveDirection:{MD_Left:1,MD_Right:2,MD_Up:3,MD_Down:4},SnakeDirection:{SD_Left:1,SD_Right:2,SD_Up:3,SD_Down:4,SD_Left_Up:5,SD_Left_Down:6,SD_Right_Up:7,SD_Right_Down:8}},cc._RF.pop()},{}],DiCiMgr:[function(e,t,i){"use strict";cc._RF.push(t,"cbfc3a260dH7rKvcVRuxNG4","DiCiMgr");e("Util");var s=e("./gameobject/DiCiNode");cc.Class({extends:cc.Component,diciNodeVec:null,diciGIDVec:null,ctor:function(){},GenerateDiCi:function(e){if(e){this.diciGIDVec=[],this.diciNodeVec=[];for(var t=Game.MapUtil.GetDiCiGID(),i=0;i<t.length;i++){var n=t[i];if(0<n.gid){var o=Game.MapUtil.ConvertGIDToPos(n.gid),a=new s;switch(a.setPosition(o),a.gid=n.gid,e.addChild(a,10),this.diciNodeVec.push(a),this.diciGIDVec.push(n.gid),n.direction){case 1:a.rotation=180;break;case 2:a.rotation=0;break;case 3:a.rotation=90;break;case 4:a.rotation=-90}}}}},GetAllDiCiNode:function(){return this.diciNodeVec},GetAllDiCiGID:function(){return this.diciGIDVec},RemoveDiCiByGID:function(e){for(var t=0;t<this.diciNodeVec.length;t++)if(this.diciNodeVec[t].gid==e){this.diciNodeVec[t].destroy(),this.diciNodeVec.splice(t,1);break}for(t=0;t<this.diciGIDVec.length;t++)if(this.diciGIDVec[t]==e){this.diciGIDVec.splice(t,1);break}},Clear:function(){this.diciNodeVec&&(this.diciNodeVec.length=0),this.diciGIDVec&&(this.diciGIDVec.length=0)}}),cc._RF.pop()},{"./gameobject/DiCiNode":"DiCiNode",Util:"Util"}],DiCiNode:[function(e,t,i){"use strict";cc._RF.push(t,"f3c97uUUiVPwZwBDin/orWF","DiCiNode");var n=e("Entity");cc.Class({extends:n,ctor:function(){this.setName("DiCiNode"),this.sprite.spriteFrame.setTexture(cc.url.raw("resources/gamescene/dici.png"))}}),cc._RF.pop()},{Entity:"Entity"}],DropComponent:[function(e,t,i){"use strict";cc._RF.push(t,"fdeb8NW78xFGo2Zaokn7Twu","DropComponent");var a=e("Util");e("ConstDefine").MoveDirection,cc.Class({extends:cc.Component,droping:null,ctor:function(){this.droping=!1},checkDrop:function(){this.node.isWin||this.droping||this.isFloated()&&this.startDrop()},isFloated:function(){var e=this.node.getAllGID();if(e.length<=0)return!1;for(var t=Game.MapUtil.GetMapTerrainGID(),i=0;i<e.length;i++){var n=Game.MapUtil.GetDownGID(e[i]);if(a.IsContainElement(t,n)||0==Game.MapUtil.IsNull(n))return!1}if("StoneNode"==this.node.name){var o=Game.MapUtil.GetSnakeGID();for(i=0;i<e.length;i++){n=Game.MapUtil.GetDownGID(e[i]);if(a.IsContainElement(o,n))return!1}}return!0},startDrop:function(){if(this.node){this.droping=!0,"StoneNode"==this.node.name&&(Game.GlobalVar.isStoneDroping=!0),this.node.doDropAction()}},dropFinish:function(){this.droping=!1},frameOnMove:function(e){this.node.myDropDirtyFlag&&(this.checkDrop(),this.node.setMyDropDirtyFlag(!1))}});cc._RF.pop()},{ConstDefine:"ConstDefine",Util:"Util"}],Entity:[function(e,t,i){"use strict";cc._RF.push(t,"40b58at5nxHorVMycZ3PWHo","Entity");var n=e("BaseNode");cc.Class({extends:n,gid:0,nextGID:0,sprite:null,ctor:function(){this.setName("Entity"),this.gid=arguments[0],this.nextGID=this.gid;var e=this.addComponent(cc.Sprite);e.spriteFrame=new cc.SpriteFrame,this.refreshPos(this.gid),this.sprite=e},doEnter:function(){},doExit:function(){},getNewPos:function(e){return Game.MapUtil.ConvertGIDToPos(e)},doDropAction:function(){var e=this;if(!Game.GlobalVar.isGameOver){this.nextGID=this.gid+Game.MapUtil.GetMapBlockNum().width;var t=this.nextGID,i=(Game.MapUtil.GetMapBlockSize().width,this.getNewPos(t)),n=new cc.moveTo(GameConfig.DropSpeed,i),o=new cc.sequence(n,cc.callFunc(function(){e.dropFinish()}));this.runAction(o),this.gid=t}},dropFinish:function(){},refreshPos:function(e){var t=Game.MapUtil.ConvertGIDToPos(e);this.setPosition(t)},getGID:function(){return this.gid},setGID:function(e){this.gid=e},setNextGID:function(e){this.nextGID=e},getNextGID:function(){return this.nextGID}}),cc._RF.pop()},{BaseNode:"BaseNode"}],EventCenter:[function(e,t,i){"use strict";cc._RF.push(t,"1e061wY5+NPY7IuNaeKMLVm","EventCenter"),window.Game=window.Game||{},window.Game.EventCenter={eventTargetList:null,dispatchList:null,RegisterEvent:function(e,t,i){this.eventTargetList||(this.eventTargetList={}),this.eventTargetList[e]||(this.eventTargetList[e]={}),this.eventTargetList[e][t]||(this.eventTargetList[e][t]=[]),this.eventTargetList[e][t].push(i)},DispatchEvent:function(e,t){if(this.eventTargetList)for(var i in this.eventTargetList)if(this.eventTargetList[i]){var n=this.eventTargetList[i];if(n[e]){var o=n[e];if(o)for(var a=0;a<o.length;a++)o[a](t)}}},DispatchEventSync:function(e){this.dispatchList||(this.dispatchList=[]),this.dispatchList.push(e)},FrameOnMove:function(e){if(this.dispatchList&&0<this.dispatchList.length){for(var t=this.dispatchList.length,i=0;i<t;i++){var n=this.dispatchList[i];this.DispatchEvent(n)}this.dispatchList.length=0}},RemoveEvent:function(e){this.eventTargetList&&this.eventTargetList[e]&&delete this.eventTargetList[e]},ClearAll:function(){this.eventTargetList&&(this.eventTargetList=null),this.dispatchList&&(this.dispatchList.length=0,this.dispatchList=null)}},Game.MessageType={Snake_Move_Finish:"Snake_Move_Finish",Snake_Drop_Finish:"Snake_Drop_Finish",Stone_Drop_Finish:"Stone_Drop_Finish",CheckIsNotMove:"CheckIsNotMove",Check_Stone_Drop:"Check_Stone_Drop",GAME_WIN:"GAME_WIN",GAME_FAIL:"GAME_FAIL",Can_Eat_Apple:"Can_Eat_Apple",ClickedLockydrawBtn:"ClickedLockydrawBtn",Join_Next_Level:"Join_Next_Level",Reset_Start_Game:"Reset_Start_Game",Advertise_Play_Finish:"Advertise_Play_Finish",Update_Game_Object_ZIndex:"Update_Game_Object_ZIndex",Ctr_Snake_Move_To_Left:"Ctr_Snake_Move_To_Left",Ctr_Snake_Move_To_Right:"Ctr_Snake_Move_To_Right",Ctr_Snake_Move_To_Up:"Ctr_Snake_Move_To_Up",Ctr_Snake_Move_To_Down:"Ctr_Snake_Move_To_Down",Game_MIN_TIME_REP:"Game_MIN_TIME_REP",Game_MIN_TIME_REP_NO_DATA:"Game_MIN_TIME_REP_NO_DATA"},cc._RF.pop()},{}],GameOverLayer:[function(e,t,i){"use strict";cc._RF.push(t,"dbfd7FfgI5CDZFbsgefBJRR","GameOverLayer");var o=e("Util"),a=(e("GlobalVar"),e("LevelData")),n=e("WXHelper"),s=e("AdvertiseMgr"),c=e("AdvertiseConfig");cc.Class({extends:cc.Component,properties:{histroyMaxScore:{default:null,type:cc.Node},newRecrod:{default:null,type:cc.Node},lockyDrawUI:{default:null,type:cc.Node},shareBtn:{default:null,type:cc.Node},returnBtn:{default:null,type:cc.Node},nextLevelBtn:{default:null,type:cc.Node},continueBtn:{default:null,type:cc.Node},restBtn:{default:null,type:cc.Node},forHelpBtn:{default:null,type:cc.Node},maskBg:{default:null,type:cc.Node},moreGameLayout:cc.Node,cblPrefab:cc.Prefab,rankingSprite:cc.Sprite},onLoad:function(){this.initLayer()},start:function(){this.tempTime=0,this.rankingSprite.node.zIndex=1e3,this.initMoreGameUI()},initMoreGameUI:function(){var s=this;Game.SendMessage.SendGetGameListMessage(GameConfig.GameListID,function(e){if(e)for(var t=e.redirect,i=0;t.length,i<3;i++){var n=cc.instantiate(s.cblPrefab),o=n.getComponent("PanelItem");if(n.setPosition(0,0),o){var a={img_url:t[i].img_url,game_id:t[i].game_id,name:t[i].name,app_id:e.hz_app_id,path:e.hz_path};o.setItemData(a)}s.moreGameLayout.addChild(n)}})},show:function(e){if(this.node.active=!0,this.maskBg.active=!0,this.rankingSprite.node.active=!0,Game.PopUpMgr.Show_ScaleEffect(this.node),this.refreshUI(e),this.showRankList(),Game.GlobalVar.isWin&&Game.GlobalVar.curLevel==GameConfig.LevelNum&&this.nextLevelBtn){var t=this.nextLevelBtn.getComponent(cc.Sprite);t&&(t.spriteFrame=new cc.SpriteFrame(cc.url.raw("resources/gamescene/beContinued.png")))}},hide:function(){this.tex=null,this.tempTime=0,this.maskBg.active=!1,this.rankingSprite.node.active=!1,Game.PopUpMgr.Hide_ScaleEffect(this.node)},initLayer:function(){this.maskBg.zIndex=100,this.node.zIndex=101,o.RegBtnTouchBeginEvent(this.maskBg,this.maskLayerClicked.bind(this)),o.RegBtnClickEvent(this.shareBtn,this.shareBtnClicked.bind(this)),o.RegBtnClickEvent(this.returnBtn,this.retureBtnClicked.bind(this)),o.RegBtnClickEvent(this.nextLevelBtn,this.nextLevelBtnClicked.bind(this)),o.RegBtnClickEvent(this.continueBtn,this.continueClicked.bind(this)),o.RegBtnClickEvent(this.restBtn,this.restClicked.bind(this)),o.RegBtnClickEvent(this.forHelpBtn,this.forHelpBtnClicked.bind(this)),o.ScreenAdaptation(this.rankingSprite.node),o.ScreenAdaptation(this.maskBg)},showRankList:function(){this.tex=n.GameOverRankList()},refreshUI:function(e,t){if(this.histroyMaxScore&&o.SetNodeText(this.histroyMaxScore,a.GetCurPassTime()),e&&this.newRecrod){this.newRecrod.active=!0;var i=a.GetCurPassTime(),n=this.newRecrod.getChildByName("newScore");o.SetNodeText(n,i)}else this.newRecrod.active=!1;t&&(this.newRecrod.active=!0)},lockyDrawBtnClicked:function(){cc.log("lockyDrawBtnClicked"),Game.AudioManager.playButtonSound(),Game.EventCenter.DispatchEvent(Game.MessageType.ClickedLockydrawBtn)},shareBtnClicked:function(){cc.log("shareBtnClicked"),Game.AudioManager.playButtonSound(),n.Share()},retureBtnClicked:function(){Game.AudioManager.playButtonSound(),Game.SceneMgr.switchScene(Game.SceneType.StartScene)},nextLevelBtnClicked:function(){Game.AudioManager.playButtonSound(),Game.EventCenter.DispatchEvent(Game.MessageType.Join_Next_Level)},continueClicked:function(){cc.log("continueClicked"),n.IsWXContext()?s.CreateVideoAd(c.ADConfig_Relive_Video,function(e){e&&Game.EventCenter.DispatchEvent(Game.MessageType.Reset_Start_Game)}):Game.EventCenter.DispatchEvent(Game.MessageType.Reset_Start_Game)},restClicked:function(){Game.SceneMgr.switchScene(Game.SceneType.StartScene)},forHelpBtnClicked:function(){cc.log("forHelpBtnClicked"),n.Share()},selectBtnClicked:function(){Game.AudioManager.playButtonSound(),Game.SceneMgr.switchScene(Game.SceneType.SelectScene)},maskLayerClicked:function(){return!0},_updateSubDomainCanvas:function(){null!=window.sharedCanvas&&this.tex&&this.rankingSprite&&(this.tex.initWithElement(window.sharedCanvas),this.tex.handleLoadedTexture(),this.rankingSprite.spriteFrame=new cc.SpriteFrame(this.tex))},update:function(e){0!=this.node.active&&(this.tempTime+=e,this.tempTime>=GameConfig.GameOverRankListUpdateTime&&(this.tempTime=0,this._updateSubDomainCanvas()))},onDestroy:function(){cc.log("WinLayer onDestroy")}}),cc._RF.pop()},{AdvertiseConfig:"AdvertiseConfig",AdvertiseMgr:"AdvertiseMgr",GlobalVar:"GlobalVar",LevelData:"LevelData",Util:"Util",WXHelper:"WXHelper"}],GameRes:[function(e,t,i){"use strict";cc._RF.push(t,"64a3d6dckBL9ox/iuD56Fsw","GameRes");for(var n={StartSceneRes:["EffectOff","EffectOn","VibrationOff","VibrationOn","VibrationOn","cishu","music/bgmusic","music/btnclick","prefab/RankListScene","prefab/SelectScene","prefab/StartScene"],GameSceneRes:["gamescene/body","gamescene/body_a","gamescene/head1","gamescene/head2","gamescene/head3","gamescene/head4","gamescene/head5","gamescene/head_a","gamescene/head_a","gamescene/chonghzi","music/beici","music/daojishi","music/directionclicked","music/eatApple","music/fail","music/getMoney","music/pushStone","music/win"],GameMapRes:[]},o=1;o<=30;o++){var a="map/level_"+o;n.GameSceneRes.push(a)}t.exports=n,cc._RF.pop()},{}],GameScene:[function(e,t,i){"use strict";cc._RF.push(t,"4fb61pveAdGiqF/LaUyVw1a","GameScene");var s=e("ConstDefine").MoveDirection,o=e("Util"),n=e("WXHelper"),a=e("LevelData"),c=e("Snakes"),r=e("JJCYView"),l=(e("SceneCom"),e("GameRes")),h=e("AdvertiseMgr"),d=e("AdvertiseConfig");a=e("LevelData");cc.Class({extends:cc.Component,properties:{winLayerNode:{default:null,type:cc.Node},failLayerNode:{default:null,type:cc.Node},lockydrawLayerNode:cc.Node,levelNum:{default:null,type:cc.Node},bctimeText:{default:null,type:cc.Node},selectBtn:{default:null,type:cc.Node},replayBtn:{default:null,type:cc.Node},popUpPrefab:{default:null,type:cc.Prefab}},isStart:!1,lockydrawLayer:null,openDoorNode:null,closeDoorNode:null,isOver:!1,curTime:null,moveLogic:null,shelterTileVec:null,isMoving:null,outLevelMaskNode:null,jjcyView:null,stoneMgr:null,appleMgr:null,diciMgr:null,onLoad:function(){this.moveLogic=o.GetComponent(this.node,"MoveLogic"),this.lockydrawLayer=o.GetComponent(this.lockydrawLayerNode,"LockydrawLayer"),this.stoneMgr=o.GetComponent(this.node,"StoneMgr"),this.appleMgr=o.GetComponent(this.node,"AppleMgr"),this.diciMgr=o.GetComponent(this.node,"DiCiMgr"),o.RegBtnClickEvent(this.selectBtn,this.selectLevelClicked.bind(this)),o.RegBtnClickEvent(this.replayBtn,this.replayBtnClicked.bind(this));this.initEventListen(),this.moveLogic.init(),this.init()},start:function(){0==a.IsPlayedLevel(Game.GlobalVar.curLevel)&&a.UseChallengeCount()},reset:function(){this.unscheduleAllCallbacks(),this.closeReplayEffect(),this.shelterTileVec&&(this.shelterTileVec.length=0),this.outLevelMaskNode=null,this.openDoorNode=null,this.closeDoorNode=null,this.jjcyView&&(this.jjcyView=null),this.stoneMgr&&this.stoneMgr.Clear(),this.appleMgr&&this.appleMgr.Clear(),this.diciMgr&&this.diciMgr.Clear(),this.snakes&&(this.snakes.doExit(),this.snakes.destroy()),this.moveLogic&&this.moveLogic.reset(),n.ClearSharedCanvas(),Game.MapUtil.Reset()},init:function(){var e=this;(this.levelNum&&o.SetNodeText(this.levelNum,Game.GlobalVar.curLevel),this.snakes=new c,this.isOver=!1,this.loadIndex=0,this.isLoading=!1,this.curTime=0,this.isLoadFinish=!1,this.isStart=!1,this.isMoving=!1,Game.GlobalVar.isGameOver=!1,this.winLayerNode)&&this.winLayerNode.getComponent("GameOverLayer").hide();this.failLayerNode&&this.failLayerNode.getComponent("GameOverLayer").hide();this.bctimeText&&o.SetNodeText(this.bctimeText,0),this.getPassLevelMinTime(),this.schedule(function(){e.refreshUI()},1,"RefreshUI"),a.UpdateDaojishiData(),this.initGame()},resetGame:function(){this.reset(),this.init()},joinNextLevel:function(){if(Game.GlobalVar.curLevel!=GameConfig.LevelNum){var t=this;if(5<=a.GetChallengeCount()){if(t.popUpPrefab){var e=cc.instantiate(t.popUpPrefab);e.getComponent("PopUpLayer").addContext(1),e.getComponent("PopUpLayer").show(function(){n.IsWXContext()?h.CreateVideoAd(d.ADConfig_Relive_Video,function(e){e&&(a.SetChallengeCount(0),a.UseChallengeCount(),t.reset(),Game.GlobalVar.curLevel++,t.init())}):(a.SetChallengeCount(0),a.UseChallengeCount(),t.reset(),Game.GlobalVar.curLevel++,t.init())}),t.node.addChild(e,1e3)}}else t.reset(),Game.GlobalVar.curLevel++,t.init()}},initMap:function(e){var t=new cc.Node,i=t.addComponent(cc.TiledMap),n=cc.loader.getRes("map/level_"+e,cc.TiledMapAsset);i.tmxAsset=n,Game.MapUtil.Init(i),this.recreateTiled(),t=null,Game.MapUtil.InitEnd()},releaseRes:function(){for(var e=0;e<l.GameSceneRes.length;e++){var t=l.GameSceneRes[e];cc.loader.releaseRes(t)}},initGame:function(){this.initMap(Game.GlobalVar.curLevel),this.generateSnake(),this.appleMgr.GenerateApple(this.snakes),this.generateDoor(),this.diciMgr.GenerateDiCi(this.snakes),this.stoneMgr.GenerateStone(this.snakes),this.refreshZIndex(),this.showJJCYView(),this.moveLogic.snakeNode=this.snakes,this.moveLogic.stoneNode=this.stoneMgr,this.startCountdown()},showJJCYView:function(){var e=this.node.getChildByName("JJCYSprite");e&&(this.jjcyView=new r,this.jjcyView.setView(e),this.jjcyView.show())},initEventListen:function(){var t=this;Game.EventCenter.RegisterEvent(this.uuid,Game.MessageType.Ctr_Snake_Move_To_Left,function(){t.move(s.MD_Left)}),Game.EventCenter.RegisterEvent(this.uuid,Game.MessageType.Ctr_Snake_Move_To_Right,function(){t.move(s.MD_Right)}),Game.EventCenter.RegisterEvent(this.uuid,Game.MessageType.Ctr_Snake_Move_To_Up,function(){t.move(s.MD_Up)}),Game.EventCenter.RegisterEvent(this.uuid,Game.MessageType.Ctr_Snake_Move_To_Down,function(){t.move(s.MD_Down)}),Game.EventCenter.RegisterEvent(this.uuid,Game.MessageType.Snake_Move_Finish,function(){t.isOver||(t.updateSnakeGID(),t.updateStoneGID(),t.isDeatch()&&(t.snakes.doDespairFace(),t.gameOver(!1)),t.isAdjacentToApple()&&t.snakes.doAtTheMouthFace(),t.isMoving=!1)}),Game.EventCenter.RegisterEvent(this.uuid,Game.MessageType.Snake_Drop_Finish,function(){Game.GlobalVar.isGameOver||(t.moveLogic.isNotMove()&&t.replayEffect(),t.isDeatch()&&(t.snakes.doDespairFace(),t.gameOver(!1)),t.isAdjacentToApple()&&t.snakes.doAtTheMouthFace(),t.updateSnakeGID())}),Game.EventCenter.RegisterEvent(this.uuid,Game.MessageType.Stone_Drop_Finish,function(){Game.GlobalVar.isGameOver||(t.updateStoneGID(),t.moveLogic.isNotMove()&&t.replayEffect())}),Game.EventCenter.RegisterEvent(this.uuid,Game.MessageType.CheckIsNotMove,function(){Game.GlobalVar.isStoneDroping||Game.GlobalVar.isGameOver||Game.GlobalVar.isWin||0!=t.snakes.isStatic()&&t.moveLogic.isNotMove()&&t.replayEffect()}),Game.EventCenter.RegisterEvent(this.uuid,Game.MessageType.ClickedLockydrawBtn,function(){t.lockydrawLayer&&t.lockydrawLayer.show()}),Game.EventCenter.RegisterEvent(this.uuid,Game.MessageType.Game_MIN_TIME_REP,function(e){t.refreshMinTimeUI(e)}),Game.EventCenter.RegisterEvent(this.uuid,Game.MessageType.Game_MIN_TIME_REP_NO_DATA,function(){t.refreshMinTimeUI(0)}),Game.EventCenter.RegisterEvent(this.uuid,Game.MessageType.Join_Next_Level,function(){t.joinNextLevel(!0)}),Game.EventCenter.RegisterEvent(this.uuid,Game.MessageType.Reset_Start_Game,function(){t.resetGame(!0)}),Game.EventCenter.RegisterEvent(this.uuid,Game.MessageType.GAME_WIN,function(){t.gameOver(!0)}),Game.EventCenter.RegisterEvent(this.uuid,Game.MessageType.GAME_FAIL,function(){t.gameOver(!1)}),Game.EventCenter.RegisterEvent(this.uuid,Game.MessageType.Update_Game_Object_ZIndex,function(){t.refreshZIndex()}),Game.EventCenter.RegisterEvent(this.uuid,Game.MessageType.Check_Stone_Drop,function(){t.stoneMgr.SetMyDropDirtyFlag()})},clearEventListen:function(){Game.EventCenter.RemoveEvent(this.uuid)},sendPassLevelTime:function(){Game.SendMessage.SendPassLevelTime(Game.GlobalVar.curLevel,this.curTime)},getPassLevelMinTime:function(){Game.SendMessage.SendGetPassLevelMinTime(Game.GlobalVar.curLevel)},generateApple:function(){for(var e=Game.MapUtil.GetAppleGID(),t=0;t<e.length;t++){var i=e[t];if(0<i){var n=Game.MapUtil.ConvertGIDToPos(i),o=(n.x,cc.winSize.width,n.y,cc.winSize.height,new cc.Node("AppleNode")),a=o.addComponent(cc.Sprite);a.spriteFrame=new cc.SpriteFrame,a.spriteFrame.setTexture(cc.url.raw("resources/gamescene/apple.png")),o.setPosition(n),o.gid=i,this.snakes.addChild(o,10)}}},generateSnake:function(){this.snakes.create(),this.node.addChild(this.snakes)},generateDoor:function(){var e=Game.MapUtil.GetDoorGID(),t=Game.MapUtil.ConvertGIDToPos(e);t.y-=.5*Game.MapUtil.GetMapBlockSize().height;var i=o.CreateSprite("opendoorNode",cc.url.raw("resources/gamescene/open_door.png"));i.setAnchorPoint(cc.p(.5,0)),i.setPosition(t),i.gid=e;var n=o.CreateSprite("closedoorNode",cc.url.raw("resources/gamescene/close_door.png"));n.setAnchorPoint(cc.p(.5,0)),n.setPosition(t),n.gid=e-1,this.snakes.addChild(i,5),this.snakes.addChild(n,20),this.closeDoorNode=n,this.openDoorNode=i},recreateTiled:function(){this.shelterTileVec||(this.shelterTileVec=[]);var e=Game.MapUtil.GetMapTerrainGID();if(0==this.shelterTileVec.length)for(var t=0;t<e.length;t++){var i=e[t],n=Game.MapUtil.GetTiledSpriteFrame(i);if(n){var o=new cc.Node("node");o.addComponent(cc.Sprite).spriteFrame=n.spriteFrame,o.gid=i,o.setPosition(n.pos),this.snakes.addChild(o,20),this.shelterTileVec.push(o)}else{var a=Game.MapUtil.ConvertGIDToTID(i);cc.log("terrain:("+a.x+","+a.y+")not find")}}},refreshZIndex:function(){var e=this.shelterTileVec.concat(this.snakes.getAllNode());e=(e=(e=(e=(e=e.concat(this.stoneMgr.GetAllStoneNode())).concat(this.closeDoorNode)).concat(this.openDoorNode)).concat(this.appleMgr.GetAllAppleNode())).concat(this.diciMgr.GetAllDiCiNode()),o.NodeSort(e);for(var t=0;t<e.length;t++){e[t].zIndex=t+10}},updateStoneGID:function(){Game.MapUtil.UpdateStoneGID(this.stoneMgr.GetAllStoneGID())},updateSnakeGID:function(){Game.MapUtil.UpdateSnakeGID(this.snakes.getAllGID())},startCountdown:function(){if(GameConfig.isOpenDaojishi&&!a.IsPlayDaojishi()){var e=this,t=o.GetComponent(this.node,"ComCountDown");t&&t.play(function(){e.isStart=!0})}else this.isStart=!0},move:function(e){if(!this.isMoving&&this.moveLogic.isCanMove(e)){if(this.isMoving=!0,Game.AudioManager.playDirectionSound(),this.isWin(e))return void this.outLevel(e);this.isTouchDiCi(e)&&Game.AudioManager.playBeiCiSound();var t=this.isEatingApple(e);0<=t?this.eatApple(e,t):this.moveLogic.moveLogic(e)}},isAdjacentToApple:function(){if(null==this.snakes||0==this.snakes.isStatic())return!1;if(this.appleMgr){for(var e=this.snakes.getHeadCurGID(),t=Game.MapUtil.GetUpGID(e),i=Game.MapUtil.GetDownGID(e),n=Game.MapUtil.GetLeftGID(e),o=Game.MapUtil.GetRightGID(e),a=this.appleMgr.GetAllAppleGID(),s=0;s<a.length;s++){var c=a[s];if(c){if(t===c)return!0;if(i===c)return!0;if(n===c)return!0;if(o===c)return!0}}return!1}},isAdjacentToDici:function(){cc.assert(this.diciMgr,"this.diciMgr is null.");for(var e=this.snakes.getHeadCurGID(),t=Game.MapUtil.GetUpGID(e),i=Game.MapUtil.GetDownGID(e),n=Game.MapUtil.GetLeftGID(e),o=Game.MapUtil.GetRightGID(e),a=this.diciMgr.GetAllDiCiGID(),s=0;s<a.length;s++){var c=a[s];if(c){if(t===c)return!0;if(i===c)return!0;if(n===c)return!0;if(o===c)return!0}}return!1},isEatingApple:function(e){if(e==s.MD_Up&&this.snakes.isVertical())return-1;if(!this.appleMgr)return-1;for(var t=this.snakes.getHeadCurGID(),i=Game.MapUtil.GetNextGID(e,t),n=this.appleMgr.GetAllAppleGID(),o=0;o<n.length;o++){var a=n[o];if(a==i)return a}return-1},eatApple:function(e,t){this.isMoving=!0,this.appleMgr&&this.appleMgr.RemoveAppleByGID(t),this.snakes&&this.snakes.eatApple(e,t),Game.GlobalVar.isEatedApple=!0,Game.AudioManager.playEatAppleSound()},isDeatch:function(e){if(Game.GlobalVar.isDroping)return!1;for(var t=Game.MapUtil.GetDiCiGID(),i=this.snakes.getAllGID(),n=0;n<t.length;n++)for(var o=t[n],a=0;a<i.length;a++){var s=i[a];if(o.gid==s)return!0}return!1},isTouchDiCi:function(e){for(var t=Game.MapUtil.GetDiCiGID(),i=(this.snakes.getHeadCurGID(),Game.MapUtil.GetNextGID(e)),n=0;n<t.length;n++){if(t[n].gid==i)return!0}return!1},isWin:function(e){if(e==s.MD_Up&&this.snakes.isVertical())return!1;var t=Game.MapUtil.GetDoorGID(),i=this.snakes.getHeadCurGID();return Game.MapUtil.GetNextGID(e,i)==t},refreshUI:function(){0!=this.isStart&&(this.curTime++,this.bctimeText&&o.SetNodeText(this.bctimeText,this.curTime))},refreshMinTimeUI:function(e){var t=this.node.getChildByName("ZDTimeImg"),i=this.node.getChildByName("ZDTimeText");t&&(t.active=e<=0),i&&(i.active=0<e,i.active&&(i.getComponent(cc.Label).string=e))},outLevel:function(e){Game.GlobalVar.isWin=!0,this.closeDoorNode.active=!1,this.snakes.isWin=!0,this.snakes.outLevel(e),this.outLevelMask(e),this.snakes.changeParent(this.outLevelMaskNode),this.moveLogic.isWin=!0,this.moveLogic.winDirection=e,this.moveLogic.moveLogic(e)},outLevelMask:function(e){var t=new cc.Node("OutLevelMask");if(t){this.snakes.addChild(t);var i=t.addComponent(cc.Mask);i&&(i.inverted=!0),t.zIndex=1e3;var n=Game.MapUtil.GetDoorGID(),o=Game.MapUtil.ConvertGIDToPos(n);switch(e){case s.MD_Left:t.setAnchorPoint(cc.p(1,.5)),t.width=cc.winSize.width,t.height=60;break;case s.MD_Right:t.setAnchorPoint(cc.p(0,.5)),t.width=cc.winSize.width,t.height=60;break;case s.MD_Up:t.setAnchorPoint(cc.p(.5,0)),t.width=60,t.height=cc.winSize.height;break;case s.MD_Down:t.setAnchorPoint(cc.p(.5,1)),t.width=60,t.height=cc.winSize.height}t.position=o,this.outLevelMaskNode=t}},selectLevelClicked:function(){0!=this.isStart&&(Game.AudioManager.playButtonSound(),Game.SceneMgr.switchScene(Game.SceneType.SelectScene))},replayBtnClicked:function(){if(0!=this.isStart)if(Game.AudioManager.playButtonSound(),this.closeReplayEffect(),5!=a.GetResetCount(Game.GlobalVar.curLevel))a.AddResetCount(Game.GlobalVar.curLevel),this.resetGame();else{var t=this;if(this.popUpPrefab){var e=cc.instantiate(this.popUpPrefab);e.getComponent("PopUpLayer").addContext(2),e.getComponent("PopUpLayer").show(function(){n.IsWXContext()?h.CreateVideoAd(d.ADConfig_Relive_Video,function(e){e&&(a.ClearResetCount(Game.GlobalVar.curLevel),a.AddResetCount(Game.GlobalVar.curLevel),t.resetGame())}):(a.ClearResetCount(Game.GlobalVar.curLevel),a.AddResetCount(Game.GlobalVar.curLevel),t.resetGame())}),this.node.addChild(e,1e3)}}},replayEffect:function(){},closeReplayEffect:function(){this.replayBtn&&(this.replayBtn.stopAllActions(),this.replayBtn.opacity=255)},update:function(e){this.isOver||(this.jjcyView&&this.jjcyView.update(e),this.stoneMgr&&this.stoneMgr.FrameOnMove(e),this.snakes&&this.snakes.frameOnMove(e),Game.EventCenter.FrameOnMove(e))},gameOver:function(e){Game.GlobalVar.isGameOver=!0,Game.GlobalVar.isStoneDroping=!1,Game.GlobalVar.isEatedApple=!1,Game.GlobalVar.isWin=e,Game.GlobalVar.isDroping=!1,this.unscheduleAllCallbacks(),n.ClearSharedCanvas(),e?this.win():this.failed(),this.snakes.gameOver(),this.isOver=!0},win:function(){Game.AudioManager.playWinSound();var e=!1;if(a.IsPlayedCurLevel()){var t=a.GetCurPassTime();this.curTime<t&&(a.UpdateCurPassTime(this.curTime),e=!0)}else a.UpdateCurPassTime(this.curTime),e=!0;this.winLayerNode.getComponent("GameOverLayer").show(e),a.UpdateNextLockstateData(!0),n.UploadUserCloudStorage(a.GenerateUserCloudData()),this.sendPassLevelTime()},failed:function(){Game.AudioManager.playFailSound(),this.failLayerNode.getComponent("GameOverLayer").show(!1,!0)},onDestroy:function(){cc.log("Game--\x3e>>onDestroy"),this.clearEventListen(),this.releaseRes()}}),cc._RF.pop()},{AdvertiseConfig:"AdvertiseConfig",AdvertiseMgr:"AdvertiseMgr",ConstDefine:"ConstDefine",GameRes:"GameRes",JJCYView:"JJCYView",LevelData:"LevelData",SceneCom:"SceneCom",Snakes:"Snakes",Util:"Util",WXHelper:"WXHelper"}],GameUILayer:[function(e,t,i){"use strict";cc._RF.push(t,"b700bOu5rdClK5JMgIYjJKS","GameUILayer");cc.Class({ctor:function(){}});cc._RF.pop()},{}],GlobalVar:[function(e,t,i){"use strict";cc._RF.push(t,"9b4a7v/olhM2Yb3IXIK77xW","GlobalVar"),window.Game=window.Game||{},Game.GlobalVar={curLevel:1,ShareText:"开局一条蛇无限进化，结局你无法想象！！",loadingSceneType:1,isWin:!1,isDroping:!1,isStoneDroping:!1,isEatedApple:!1,userID:null,isGameOver:!1,GameAdGID:null,GameAdInfo:null},window.GameConfig={isOpenDaojishi:!0,SoundSwitch:!0,JWLogoDuration:2,DebugMode:!0,PopUpDuration:.15,TransitionSceneDuration:.15,SnakeMoveSpeed:.2,DropSpeed:.1,RankListNum:10,LevelNum:30,LockyDrawMinAngle:1800,LockyDrawRotateTime:5,LockydrawBlinkTime:.5,GameOverRankListUpdateTime:0,FetchFriendRankListUpdateTime:0,JJCYPlayerUpdateTime:1.5,AppID:"wxd296113def5acd74",Game_Tip_1:"观看完整广告才能顺利重置",Game_Tip_2:"观看完整广告才能继续挑战",GetGameADAddr:"https://gather.51weiwan.com/hz/general/plan1",LoginAddr:"https://gather.51weiwan.com/api/login/index",SendPassLevelTimeAddr:"https://gather.51weiwan.com/api/game/timeAdd",GetPassLevelTimeAddr:"https://gather.51weiwan.com/api/game/minTime",GetConfigAddr:"https://gather.51weiwan.com/api/app/getConfig",GetGameList:"https://gather.51weiwan.com/api/app/redirectlist",GameListID:9001,GameID:9},window.GameLocalData={ReadLevelData:function(){var e=cc.sys.localStorage.getItem("levelInfo");return e?JSON.parse(e):null},ReadUserID:function(){var e=cc.sys.localStorage.getItem("userid");return e||null},ReadConfigData:function(){var e=cc.sys.localStorage.getItem("config");return e?JSON.parse(e):null},SaveConfigData:function(e){cc.sys.localStorage.setItem("config",JSON.stringify(e))},GetLevelChallengeCount:function(){return cc.sys.localStorage.getItem("challenge_count")},SaveLevelChallengeCount:function(e){cc.sys.localStorage.setItem("challenge_count",JSON.stringify(e))},ClearUserID:function(){cc.sys.localStorage.removeItem("userid")},SaveLevelData:function(e){var t=JSON.stringify(e);cc.sys.localStorage.setItem("levelInfo",t)},SaveUserID:function(e){cc.sys.localStorage.setItem("userid",e)}},cc._RF.pop()},{}],JJCYView:[function(e,t,i){"use strict";cc._RF.push(t,"45b29I9Zl9IPaPEQfWJf2Hx","JJCYView");e("Util");var n=e("WXHelper");cc.Class({jjchNode:cc.Node,jjchSprite:cc.Sprite,isShow:null,tex:null,ctor:function(){this.isShow=!1,this.tempTime=0,this.init()},show:function(){this.isShow=!0},init:function(){this.tex=n.JJCYPlayer()},setView:function(e){e&&(this.jjchNode=e,this.jjchSprite=e.getComponent(cc.Sprite))},_updateSubDomainCanvas:function(){null!=window.sharedCanvas&&this.tex&&(this.tex.initWithElement(window.sharedCanvas),this.tex.handleLoadedTexture(),this.jjchSprite.spriteFrame=new cc.SpriteFrame(this.tex))},update:function(e){0!=this.isShow&&(this.tempTime+=e,this.tempTime>=GameConfig.JJCYPlayerUpdateTime&&(this.tempTime=0,this._updateSubDomainCanvas()))}});cc._RF.pop()},{Util:"Util",WXHelper:"WXHelper"}],LeftPanel:[function(e,t,i){"use strict";cc._RF.push(t,"cb09bzzIFpCUbNUXLfNyU6S","LeftPanel"),cc.Class({extends:cc.Component,properties:{content:{displayName:"内容节点",default:null,type:cc.Node},leftPanelItem:{displayName:"侧拉板子节点",default:null,type:cc.Prefab}},onLoad:function(){this._initPage()},_initPage:function(){var t=this;this.loadingDisPlay();var e=this.node.parent.getChildByName("cblBtn"),i=this.node.getChildByName("bg").width;this.node.setPosition(960,0);var n=cc.moveTo(.2,e.x-i/3,0);this.node.runAction(n),this.content.removeAllChildren(),Game.SendMessage.SendGetGameListMessage(GameConfig.GameListID,function(e){t._showData(e)})},_showData:function(e){if(this.node.getChildByName("loadingLabel").active=!1,"10"===e.state)console.log("游戏列表审核中，不进行遍历展示");else for(var t=e.redirect,i=0;i<t.length;i++){var n=cc.instantiate(this.leftPanelItem),o=n.getComponent("PanelItem");if(o){var a={img_url:t[i].img_url,game_id:t[i].game_id,name:t[i].name,app_id:e.hz_app_id,path:e.hz_path};o.setItemData(a)}this.content.addChild(n)}},onBtnClickBack:function(){var e=this,t=cc.callFunc(function(){e.node.destroy()}),i=cc.moveTo(.2,cc.p(960,0)),n=cc.sequence(i,t);this.node.runAction(n)},loadingDisPlay:function(){var e=this.node.getChildByName("loadingLabel").getComponent(cc.Label);e.string="正在加载中";var t=0;e.schedule(function(){3<t&&(t=0),e.string="正在加载中"+".".repeat(t),t++},.5,cc.macro.REPEAT_FOREVER,0)}}),cc._RF.pop()},{}],LevelData:[function(e,t,i){"use strict";cc._RF.push(t,"5d4fc1EADRHiZ3/XMAc/fmG","LevelData");e("GlobalVar");var n={allLevelData:null,challengeCount:null,curDate:null,GetInitInfoObj:function(){for(var e={},t=1;t<=GameConfig.LevelNum;t++){var i={lock_state:!1,lockydraw:!1,pass_time:0,daojishi:!1,click_count:0,reset_count:0};1==t&&(i.lock_state=!0),e[t]=i}return e},DisposeUnusualData:function(){for(var e=!1,t=0;t<GameConfig.LevelNum;t++){var i=this.allLevelData[t];e&&(i.lock_state=!1,i.pass_time=0,i.daojishi=!1,i.click_count=0,i.reset_count=0),i&&!e&&0==i.lock_state&&(e=!0)}this.SaveLevelData()},ReadChallengeCount:function(){this.curDate=new Date;var e=this.curDate.toLocaleDateString(),t=null,i=GameLocalData.GetLevelChallengeCount();i&&(t=JSON.parse(i)),t&&null!=t[e]?this.challengeCount=t[e]:this.challengeCount=0},SaveChallengeCount:function(){if(this.curDate){var e={};e[this.curDate.toLocaleDateString()]=this.challengeCount,GameLocalData.SaveLevelChallengeCount(e)}},UseChallengeCount:function(){this.challengeCount+=1,this.SaveChallengeCount()},GetChallengeCount:function(){return this.challengeCount},SetChallengeCount:function(e){this.challengeCount=e,this.SaveChallengeCount()},ReadLevelData:function(){if(!this.allLevelData){var e=GameLocalData.ReadLevelData();this.allLevelData=e||n.GetInitInfoObj()}return this.allLevelData},SaveLevelData:function(e){e||(e=this.allLevelData),e&&GameLocalData.SaveLevelData(e)},IsLockedLevel:function(e){if(0==this.isValidLevelID(e))return!1;var t=this.allLevelData;if(t){var i=t[e];if(i)return i.lock_state}},UpdateLockStateData:function(e,t){if(0==this.isValidLevelID(e))return!1;var i=this.allLevelData;i&&(i[e].lock_state=t);this.SaveLevelData()},UpdateLockydrawData:function(e,t){if(0==this.isValidLevelID(e))return!1;var i=this.allLevelData;i&&(i[e].lockydraw=t);this.SaveLevelData()},UpdatePassTime:function(e,t){if(0==this.isValidLevelID(e))return!1;var i=this.allLevelData;i&&(i[e].pass_time=t);this.SaveLevelData()},UpdateDaojishiData:function(){var e=this.allLevelData;e&&(e[Game.GlobalVar.curLevel].daojishi=!0);this.SaveLevelData()},GetClickCount:function(e){var t=this.allLevelData;if(t){var i=t[e];return null==i.click_count&&(i.click_count=0),i.click_count}},AddClickCount:function(e){var t=this.allLevelData;if(t){var i=t[e];null==i.click_count&&(i.click_count=0),i.click_count++}this.SaveLevelData()},AddResetCount:function(e){var t=this.allLevelData;if(t){var i=t[e];null==i.reset_count&&(i.reset_count=0),i.reset_count++}this.SaveLevelData()},ClearResetCount:function(e){var t=this.allLevelData;if(t){var i=t[e];null==i.reset_count&&(i.reset_count=0),i.reset_count=0}this.SaveLevelData()},GetResetCount:function(e){var t=this.allLevelData;if(t){var i=t[e];return null==i.reset_count&&(i.reset_count=0),i.reset_count}},UpdateNextLockstateData:function(e){n.UpdateLockStateData(Game.GlobalVar.curLevel+1,e)},UpdateCurLockydrawData:function(e){n.UpdateLockydrawData(Game.GlobalVar.curLevel,e)},UpdateCurPassTime:function(e){n.UpdatePassTime(Game.GlobalVar.curLevel,e)},GetCurLockydrawData:function(){return!1},GetCurPassTime:function(){var e=this.allLevelData;if(e)return e[Game.GlobalVar.curLevel].pass_time},IsPlayedLevel:function(e){var t=this.allLevelData;if(t){var i=t[e];if(0==i.pass_time||null==i.pass_time)return!1}return!0},IsPlayedCurLevel:function(){return this.IsPlayedLevel(Game.GlobalVar.curLevel)},IsPlayDaojishi:function(){if(this.IsPlayedCurLevel())return!0;var e=this.allLevelData;if(e&&e[Game.GlobalVar.curLevel].daojishi)return!0;return!1},GenerateUserCloudData:function(){var e=[],t=[],i=[];if(this.allLevelData)for(var n in this.allLevelData)this.allLevelData[n].lock_state&&(t.push(n),i.push(this.allLevelData[n].pass_time));var o={key:"level_num",value:JSON.stringify(t)},a={key:"pass_time",value:JSON.stringify(i)};return e.push(o),e.push(a),e},isValidLevelID:function(e){return 1<=e&&e<=GameConfig.LevelNum}};t.exports=n,cc._RF.pop()},{GlobalVar:"GlobalVar"}],LevelLayer:[function(e,t,i){"use strict";cc._RF.push(t,"7e0deZGFqhC/pEJsnowOu3a","LevelLayer");e("GlobalVar");var s=e("LevelData"),o=e("AdvertiseMgr"),a=e("AdvertiseConfig"),c=e("WXHelper");cc.Class({extends:cc.Component,properties:{btnPrefab:cc.Prefab,popUpPrefab:cc.Prefab},allBtn:null,onLoad:function(){this.node.active=!0,s.ReadChallengeCount(),this.createBtn(),this.refreshView()},createBtn:function(){var e=this.node.getChildByName("view").getChildByName("content").children,t=1;this.allBtn=[];for(var i=this,n=0;n<e.length;n++)for(var o=e[n],a=1;a<=15;a++){var s=cc.instantiate(i.btnPrefab);s.setTag(t),s.on(cc.Node.EventType.TOUCH_END,function(e){i.levelBtnClicked(e)}),o.addChild(s),t++,this.allBtn.push(s)}},refreshView:function(){if(this.allBtn&&!(this.allBtn.length<=0))for(var e=0;e<this.allBtn.length;e++){var t=this.allBtn[e];if(t){var i=t.getTag(),n=t.getComponent(cc.Sprite),o=t.getChildByName("level_num"),a=o.getComponent(cc.Label);0==s.IsLockedLevel(i)?(o.active=!1,n.spriteFrame=new cc.SpriteFrame(cc.url.raw("resources/unlock.png"))):(o.active=!0,a.string=i)}}},levelBtnClicked:function(e){Game.AudioManager.playButtonSound();var t=e.currentTarget.tag;if(15<t){var i=this.node.parent.getComponent("SelectScene");i&&i.pageView.scrollToRight(0)}if(0!=s.IsLockedLevel(t))if(0==s.IsPlayedLevel(t)&&5<=s.GetChallengeCount()){if(this.popUpPrefab){var n=cc.instantiate(this.popUpPrefab);n.getComponent("PopUpLayer").addContext(1),n.getComponent("PopUpLayer").show(function(){c.IsWXContext()?o.CreateVideoAd(a.ADConfig_Relive_Video,function(e){e&&(s.SetChallengeCount(0),s.UseChallengeCount(),Game.GlobalVar.curLevel=t,Game.SceneMgr.switchScene(Game.SceneType.LoadingScene))}):(s.SetChallengeCount(0),s.UseChallengeCount(),Game.GlobalVar.curLevel=t,Game.SceneMgr.switchScene(Game.SceneType.LoadingScene))}),this.node.addChild(n,1e3)}}else Game.GlobalVar.curLevel=t,Game.SceneMgr.switchScene(Game.SceneType.LoadingScene);else cc.log("关卡未解锁")},onDestroy:function(){this.allBtn&&(this.allBtn.length=0)}}),cc._RF.pop()},{AdvertiseConfig:"AdvertiseConfig",AdvertiseMgr:"AdvertiseMgr",GlobalVar:"GlobalVar",LevelData:"LevelData",WXHelper:"WXHelper"}],LoadingScene:[function(e,t,i){"use strict";cc._RF.push(t,"daed4yRM0dE+6RDH0Dc3UKj","LoadingScene");var n=e("SceneCom"),o=e("GameRes");cc.Class({extends:n,properties:{loadingBar:cc.Node,appleNode:cc.Node,snakeNode:cc.Node},loadIndex:null,isLoading:null,isLoadFinish:null,progress:null,snakeRunDistance:null,comingLoadingRes:null,onLoad:function(){this.snakeRunDistance=this.loadingBar.width-this.snakeNode.width},start:function(){this.comingLoadingRes=[],this.comingLoadingRes=o.GameSceneRes,this.loadIndex=0,this.isLoading=!1,this.isLoadFinish=!1,this.progress=0,this.loadRes()},onDestroy:function(){this.comingLoadingRes=null},loadRes:function(){if(this.loadIndex>=this.comingLoadingRes.length)return this.isLoadFinish=!0,void Game.SceneMgr.switchScene(Game.SceneType.GameScene);var i=100/this.comingLoadingRes.length,n=this,e=this.comingLoadingRes[this.loadIndex];n.isLoading=!0,cc.loader.loadRes(e,function(e,t){e?cc.log(e):(n.progress+=i,n.isLoading=!1)}),this.loadIndex++},update:function(e){this.isLoadFinish||(this.isLoading||this.loadRes(),this.loadingBar&&(this.loadingBar.getComponent(cc.ProgressBar).progress=this.progress/100),this.snakeNode&&(this.snakeNode.x=this.progress*(this.snakeRunDistance/100)))}}),cc._RF.pop()},{GameRes:"GameRes",SceneCom:"SceneCom"}],LockydrawLayer:[function(e,t,i){"use strict";cc._RF.push(t,"2ffbfL4KgpO/76W5o8z3RS/","LockydrawLayer");var c=e("PropUtil"),r=e("Util"),l=e("LevelData"),n=e("WXHelper");cc.Class({extends:cc.Component,properties:{returnBtn:cc.Node,zpNode:cc.Node,feiqNode:cc.Node,getLayerNode:cc.Node,jtNode:cc.Node,receiveNode:cc.Node,showOffNode:cc.Node,flashingNode:cc.Node,jumpBtnNode:cc.Node},start:function(){var e=this;this.node.zIndex=200,l.GetCurLockydrawData()?this.jtNode.getComponent(cc.Button).interactable=!1:(this.jtNode.getComponent(cc.Button).interactable=!0,this.jtNode.on(cc.Node.EventType.TOUCH_END,function(){e.jtNodeClicked()})),this.receiveNode.on(cc.Node.EventType.TOUCH_END,function(){e.receiveBtnClicked()}),this.showOffNode.on(cc.Node.EventType.TOUCH_END,function(){e.showOffBtnClicked()}),this.returnBtn.on(cc.Node.EventType.TOUCH_END,function(){e.returnBtnClicked()}),this.jumpBtnNode.on(cc.Node.EventType.TOUCH_END,function(){e.jumpBtnClicked()}),this.node.active=!1,this.getLayerNode.active=!1,this.flashingNode.runAction(new cc.repeatForever(new cc.blink(GameConfig.LockydrawBlinkTime,1)))},show:function(){this.node.active=!0,1==l.GetCurLockydrawData()&&(this.jtNode.getComponent(cc.Button).interactable=!1,this.jtNode.off(cc.Node.EventType.TOUCH_END))},jtNodeClicked:function(){Game.AudioManager.playButtonSound(),this.jtNode.getComponent(cc.Button).interactable=!1,this.jtNode.off(cc.Node.EventType.TOUCH_END),this.startLockyDraw()},jumpBtnClicked:function(){Game.AudioManager.playButtonSound(),this.getLayerNode.active=!1},receiveBtnClicked:function(){Game.AudioManager.playButtonSound(),cc.log("receiveBtnClicked"),this.receiveNode.getComponent(cc.Button).interactable=!1,this.receiveNode.off(cc.Node.EventType.TOUCH_END);var e=this.getLayerNode.getChildByName("ReceiveSuccessful");if(e){var t=new cc.delayTime(1),i=new cc.moveTo(2,cc.p(0,cc.winSize.height)),n=new cc.fadeIn(2);e.runAction(cc.sequence(t,i,n))}},showOffBtnClicked:function(){Game.AudioManager.playButtonSound(),n.Share(),cc.log("showOffBtnClicked")},returnBtnClicked:function(){Game.AudioManager.playButtonSound(),cc.log("returnBtnClicked"),this.node.active=!1},startLockyDraw:function(){var e=this,t=c.GetPropID(),i=GameConfig.LockyDrawMinAngle+c.PropRotate[t],n=new cc.rotateTo(GameConfig.LockyDrawRotateTime,i).easing(cc.easeSineOut(5)),o=new cc.sequence(n,new cc.callFunc(function(){e.lockydrawFinish(t)}));this.zpNode.runAction(o)},lockydrawFinish:function(e){var t=this;if(l.UpdateCurLockydrawData(!0),3==c.PropType[e])this.feiqNode.active=!0;else{this.getLayerNode.active=!0;var i=this.getLayerNode.getChildByName("MoneyImg"),n=this.getLayerNode.getChildByName("RedPagImg");if(i.active=1==c.PropType[e],n.active=2==c.PropType[e],2==c.PropType[e]){Game.AudioManager.playGetMoneySound();var o=n.getChildByName("RedPacketNum"),a=n.getChildByName("Yuan");o&&(o.active=!1),a&&(a.active=!1),n.on(cc.Node.EventType.TOUCH_END,function(){t.openReaPacket()})}if(1==c.PropType[e]){Game.AudioManager.playGetMoneySound();var s=this.getLayerNode.getChildByName("PropText").getChildByName("num");s&&r.SetNodeText(s,c.PropList[e])}}},openReaPacket:function(){var e=this.getLayerNode.getChildByName("RedPagImg"),t=e.getChildByName("RedPacketNum"),i=e.getChildByName("Yuan"),n=parseInt(2*Math.random());t.active=!0,i.active=!0,r.SetNodeTexture(e,"resources/gamescene/gengduo.png"),r.SetNodeText(t,c.RedPacketList[n])}}),cc._RF.pop()},{LevelData:"LevelData",PropUtil:"PropUtil",Util:"Util",WXHelper:"WXHelper"}],LogoScene:[function(e,t,i){"use strict";cc._RF.push(t,"ea9ebs4Ex1F85BLVi4qU0xA","LogoScene");var n=e("WXHelper"),o=e("SceneCom"),a=e("Util"),s=e("GameRes");cc.Class({extends:o,properties:{jwLogo:{default:null,type:cc.Node},gameAdBg:{default:null,type:cc.Node}},isCalled:null,onLoad:function(){this.isCalled=!1,this.loadRes(),n.GetSystemInfo(),this.getLaunchOptionsSync()},loadRes:function(){for(var e=0;e<s.StartSceneRes.length;e++){var t=s.StartSceneRes[e];cc.loader.loadRes(t,function(e,t){e&&cc.log(e)})}},getLaunchOptionsSync:function(){var t=this;if(null!=window.wx){wx.onShow(function(e){console.log("onshow",e.query),e.query.game_id==GameConfig.GameID&&(console.log("[loading] 游戏返回到前台的参数中  跳转到自己的游戏中"),t.showJWLogo())});var e=wx.getLaunchOptionsSync();console.log(e);var i=e.query.gid;if(i)return console.log("开始走非正常流程"),Game.GlobalVar.GameAdGID=i,this.jwLogo.active=!1,void this.getGameAd(i)}this.showJWLogo()},getGameAd:function(e){var i=this;null!=window.wx&&Game.SendMessage.SendGetGameAdMessage(e,function(e){var t=(Game.GlobalVar.GameAdInfo=e).img;a.loadRemoteImg(i.gameAdBg,t),i.gameAdBg.active=!0,i.gameAdBg.on(cc.Node.EventType.TOUCH_END,i.logoClicked.bind(i))})},logoClicked:function(){if(Game.GlobalVar.GameAdInfo){var t=this,e=Game.GlobalVar.GameAdInfo.state,i={envVersion:"release",success:function(){console.log("跳转成功",Game.GlobalVar.GameAdGID),t.showJWLogo()},fail:function(e){console.log("跳转失败",e),t.showJWLogo()}};if(1==e){if(Game.GlobalVar.GameAdInfo.app_id==GameConfig.AppID)return void t.showJWLogo();i.appId=Game.GlobalVar.GameAdInfo.app_id,i.extraData=Game.GlobalVar.GameAdInfo.param,i.path=Game.GlobalVar.GameAdInfo.path,console.log("跳转到游戏中")}else 2==e&&(console.log("跳转到盒子中"),i.appId=Game.GlobalVar.GameAdInfo.hz_app_id,i.path=Game.GlobalVar.GameAdInfo.hz_path,i.extraData={gid:Game.GlobalVar.GameAdGID});null!=window.wx&&wx.navigateToMiniProgram(i)}},showJWLogo:function(){this.jwLogo&&(this.jwLogo.active=!0,0==this.isCalled&&(this.isCalled=!0,this.scheduleOnce(this.juLogoFinish.bind(this),GameConfig.JWLogoDuration))),this.gameAdBg&&(this.gameAdBg.active=!1)},juLogoFinish:function(){Game.SceneMgr.switchScene(Game.SceneType.StartScene)},onDestroy:function(){}}),cc._RF.pop()},{GameRes:"GameRes",SceneCom:"SceneCom",Util:"Util",WXHelper:"WXHelper"}],MapUtil:[function(e,t,i){"use strict";cc._RF.push(t,"5ea8ccBl2dInJIncA9kTNBB","MapUtil"),window.Game=window.Game||{};var n=e("ConstDefine").MoveDirection,o=e("Util");Game.MapUtil={MapNode:null,MapSize:null,MapBlockSize:null,MapBlockNum:null,MapTerrainGID:null,DoorGID:null,AppleGID:null,DiCiGID:null,StoneGID:null,SnakeGID:null,StartGID:null,Init:function(e){this.MapNode=e,this.MapBlockSize=e.getTileSize(),this.MapBlockNum=e.getMapSize(),this.MapSize=cc.size(e.node.width,e.node.height),this.InitAppleGID(),this.InitDiCiGIDVec(),this.InitDoorGID(),this.InitStartGID(),this.InitStoneGIDVec(),this.InitTerrainGidVec()},InitEnd:function(){this.MapNode=null},Reset:function(){this.MapSize=null,this.MapBlockSize=null,this.MapBlockNum=null,this.DoorGID=null,this.MapTerrainGID&&(this.MapTerrainGID.length=0,this.MapTerrainGID=null),this.AppleGID&&(this.AppleGID.length=0,this.AppleGID=null),this.DiCiGID&&(this.DiCiGID.length=0,this.DiCiGID=null),this.StoneGID&&(this.StoneGID.length=0,this.StoneGID=null),this.StartGID&&(this.StartGID.length=0,this.StartGID=null),this.SnakeGID&&(this.SnakeGID.length=0,this.SnakeGID=null)},InitTerrainGidVec:function(){this.MapTerrainGID=[];for(var e=this.MapNode.allLayers(),t=0;t<e.length;++t)for(var i=e[t].getTiles(),n=0;n<i.length;n++)0<i[n]&&this.MapTerrainGID.push(n)},InitStoneGIDVec:function(){this.StoneGID=[];for(var e=1;;){if(!(0<=(t=this.getGIDByName("stone_"+e))))break;this.StoneGID.push(t),e++}var t;0<=(t=this.getGIDByName("stone"))&&this.StoneGID.push(t)},InitDiCiGIDVec:function(){this.DiCiGID=[];for(var e=1,t=1;t<=4;t++)for(;;){if(!(0<=(n=this.getGIDByName("ci"+t+"_"+e)))){e=1;break}var i={gid:n,direction:t};this.DiCiGID.push(i),e++}for(;;){if(!(0<=(n=this.getGIDByName("ci_"+e))))break;i={gid:n,direction:3};this.DiCiGID.push(i),e++}var n;if(0<=(n=this.getGIDByName("ci"))){i={gid:n,direction:2};this.DiCiGID.push(i)}},InitAppleGID:function(){this.AppleGID=[];for(var e=1;;){if(!(0<=(t=this.getGIDByName("apple_"+e))))break;this.AppleGID.push(t),e++}var t;0<=(t=this.getGIDByName("apple"))&&this.AppleGID.push(t)},InitDoorGID:function(){this.DoorGID=this.getGIDByName("door")},InitStartGID:function(){this.StartGID={},this.SnakeGID=[],this.StartGID.headGID=this.getGIDByName("startPos_1"),this.StartGID.bodyGID=this.getGIDByName("startPos_2"),this.StartGID.tailGID=this.getGIDByName("startPos_3"),this.StartGID.headGID<0&&(this.StartGID.headGID=this.getGIDByName("startPos")),this.StartGID.bodyGID<0&&(this.StartGID.bodyGID=this.StartGID.headGID-1),this.StartGID.tailGID<0&&(this.StartGID.tailGID=this.StartGID.bodyGID-1),this.SnakeGID.push(this.StartGID.headGID),this.SnakeGID.push(this.StartGID.bodyGID),this.SnakeGID.push(this.StartGID.tailGID)},IsNull:function(e){return this.DoorGID!=e&&(!o.IsContainElement(this.AppleGID,e)&&(!o.IsContainElement(this.DiCiGID,e)&&!o.IsContainElement(this.StoneGID,e)))},RemoveTiled:function(e){if(this.MapNode)for(var t=this.ConvertGIDToTID(e),i=this.MapNode.allLayers(),n=0;n<i.length;++n){var o=i[n];o&&o.removeTileAt(t)}},GetTiledSpriteFrame:function(e){if(!this.MapNode)return null;for(var t=this.ConvertGIDToTID(e),i=this.MapNode.allLayers(),n=0;n<i.length;++n){var o=i[n],a=o.getTileAt(t),s=o.getTileGIDAt(t);if(a&&0<s){s-=1,a.color=new cc.Color(255,255,255,255),7<=s&&(s-=7);var c=a.getTexture().url,r=new cc.SpriteFrame(c,new cc.Rect(52*s,0,52,67)),l=this.ConvertGIDToPos(e,cc.p(.5,.5));return{spriteFrame:r,pos:cc.p(l.x,l.y)}}}},ConvertMapYToCanvasY:function(e){return this.MapSize?this.MapSize.height-e:0},ConvertTIDToGID:function(e){return this.MapBlockNum?e.y*this.MapBlockNum.width+e.x:0},ConvertGIDToTID:function(e){if(!this.MapBlockNum)return cc.p();var t=e%this.MapBlockNum.width,i=parseInt(e/this.MapBlockNum.width);return cc.p(t,i)},ConvertPosToTid:function(e){if(!this.MapBlockSize||!this.MapSize)return cc.p();var t=parseInt(e.x/this.MapBlockSize.width),i=parseInt((this.MapSize.height-e.y)/this.MapBlockSize.height);return cc.p(t,i)},ConvertMapPosToGID:function(e){if(!this.MapBlockSize)return 0;var t=parseInt(e.x/this.MapBlockSize.width),i=parseInt(e.y/this.MapBlockSize.height);return this.ConvertTIDToGID(cc.p(t,i))},ConvertGIDToPos:function(e,t){if(!this.MapBlockSize)return cc.p();t||(t=cc.p(.5,.5));var i=this.ConvertGIDToTID(e),n=(i.x+t.x)*this.MapBlockSize.width,o=(i.y+t.y)*this.MapBlockSize.height;return o=this.ConvertMapYToCanvasY(o),cc.p(n,o+5)},GetMapTerrainGID:function(){return this.MapTerrainGID},GetNextGID:function(e,t){var i=this.ConvertGIDToTID(t);switch(e){case n.MD_Left:i.x--;break;case n.MD_Right:i.x++;break;case n.MD_Up:i.y--;break;case n.MD_Down:i.y++}return this.ConvertTIDToGID(i)},RemoveAppleGID:function(e){if(this.AppleGID)for(var t=0;t<this.AppleGID.length;t++)e==this.AppleGID[t]&&this.AppleGID.splice(t,1)},GetMapBlockNum:function(){return this.MapBlockNum},GetMapBlockSize:function(){return this.MapBlockSize},GetLeftGID:function(e){return e-1},GetRightGID:function(e){return e+1},GetUpGID:function(e){return this.MapBlockNum?e-this.MapBlockNum.width:-1},GetDownGID:function(e){return this.MapBlockNum?e+this.MapBlockNum.width:-1},GetDoorGID:function(){return this.DoorGID},GetAppleGID:function(){return this.AppleGID},GetStartGID:function(){return this.StartGID},GetAllStoneGID:function(){return this.StoneGID},GetSnakeGID:function(){return this.SnakeGID},GetDiCiGID:function(){return this.DiCiGID},GetProperty:function(e,t){return this.getProperty(e,t)},UpdateStoneGID:function(e){this.StoneGID=e},UpdateSnakeGID:function(e){this.SnakeGID=e},getGIDByName:function(e){var t=-1;if(this.MapNode){var i=this.MapNode.getObjectGroup("objLayer");if(i){var n=i.getObject(e);if(n){var o=cc.p(n.getProperty("x"),n.getProperty("y")),a=parseInt(o.x/this.MapBlockSize.width),s=parseInt(o.y/this.MapBlockSize.height);t=this.ConvertTIDToGID(cc.p(a,s))}}}return t},getProperty:function(e,t){if(this.MapNode){var i=this.MapNode.getObjectGroup("objLayer");if(i){var n=i.getObject(e);if(n)return n.getProperty(t)}return null}}},cc._RF.pop()},{ConstDefine:"ConstDefine",Util:"Util"}],MaskLayer:[function(e,t,i){"use strict";cc._RF.push(t,"fbf207PLhxNHbEXI9mLPYma","MaskLayer");e("Util");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.maskLayerClicked.bind(this))},start:function(){},maskLayerClicked:function(){return!1}}),cc._RF.pop()},{Util:"Util"}],MoveComponent:[function(e,t,i){"use strict";cc._RF.push(t,"801abM5VAVIb6IgdWzg7Obc","MoveComponent");e("ConstDefine").MoveDirection,cc.Class({extends:cc.Component,isMoving:null,ctor:function(){this.isMoving=!1},startMove:function(){if(!this.isMoving&&this.node&&!(this.node.nextGID<0)){var e=this;this.isMoving=!0,e.node.doTransfrom&&e.node.doTransfrom(),e.node.startMove&&e.node.startMove();var t=this.node.nextGID,i=(Game.MapUtil.GetMapBlockSize().width,this.node.getNewPos(t)),n=new cc.moveTo(GameConfig.SnakeMoveSpeed,i),o=new cc.sequence(n,cc.callFunc(function(){e.moveFinish()}));this.node.runAction(o),this.node.gid=t}},moveFinish:function(){this.node.moveFinish(),this.isMoving=!1},frameOnMove:function(e){this.node.myChangedDirtyFlag&&(this.startMove(),this.node.setMyChangedDirtyFlag(!1))}});cc._RF.pop()},{ConstDefine:"ConstDefine"}],MoveLogic:[function(e,t,i){"use strict";cc._RF.push(t,"207cadIEpZOE6v0sCwI82z4","MoveLogic");var n=e("ConstDefine").MoveDirection,G=e("ConstDefine").SnakeDirection,l=e("Util"),o=cc.Class({extends:cc.Component,isMoving:null,snakeNode:null,stoneNode:null,winActionState:null,isWin:null,winDirection:null,ctor:function(){this.reset()},init:function(){var e=this;Game.EventCenter.RegisterEvent(this.uuid,Game.MessageType.Snake_Move_Finish,function(){e.moveFinish()})},onDestroy:function(){this.reset(),Game.EventCenter.RemoveEvent(this.uuid)},reset:function(){this.isMoving=!1,this.stoneNode=null,this.snakeNode=null,this.isWin=!1,this.winActionState=0,this.winDirection=0},moveLogic:function(e){this.isMoving=!0;var t,i=this.snakeNode,n=i.getHeadCurGID(),o=Game.MapUtil.GetNextGID(e,n),a=i.bodyNode.getSectionNum(),s=[];for(s.push(n),t=0;t<a;t++){var c=i.bodyNode.getSectionGID(t);s.push(c)}for(i.headNode.setNextGID(o),t=0;t<a;t++)i.bodyNode.setSectionNextGID(t,s[t]);i.tailNode.setNextGID(s[t]),this.isWin&&s[t]==Game.MapUtil.GetDoorGID()&&(this.winActionState=1);var r=e,l=i.headNode.getDirection(),h=[];for(h.push(l),t=0;t<a;t++){var d=i.bodyNode.getSectionDirection(t);h.push(d)}i.headNode.setDirection(r);var u=r;for(t=0;t<a;t++){var p=h[t];u==G.SD_Up&&p==G.SD_Right?p=G.SD_Left_Up:u==G.SD_Right&&p==G.SD_Up?p=G.SD_Right_Down:u==G.SD_Down&&p==G.SD_Right?p=G.SD_Left_Down:u==G.SD_Left&&p==G.SD_Down?p=G.SD_Left_Up:u==G.SD_Up&&p==G.SD_Left?p=G.SD_Right_Up:u==G.SD_Left&&p==G.SD_Up?p=G.SD_Left_Down:u==G.SD_Right&&p==G.SD_Down?p=G.SD_Right_Up:u==G.SD_Down&&p==G.SD_Left&&(p=G.SD_Right_Down),u=p,i.bodyNode.setSectionDirectioin(t,p)}(p=h[t])==G.SD_Left_Up&&u==G.SD_Up?p=G.SD_Up:p==G.SD_Right_Down?p=G.SD_Right:p==G.SD_Left_Down?p=G.SD_Down:p==G.SD_Left_Up&&u==G.SD_Left&&(p=G.SD_Left),i.tailNode.setDirection(p),i.setMyChangedDirtyFlag(!0);for(var g=this.stoneNode.GetAllStoneNode(),f=0;f<g.length;f++){var m=g[f];if(m&&m.gid==o){var v=Game.MapUtil.GetNextGID(e,o);m.nextGID=v,m.setMyChangedDirtyFlag(!0);break}}Game.EventCenter.DispatchEvent(Game.MessageType.Update_Game_Object_ZIndex)},rotateLogic:function(e){},moveFinish:function(){var e=this;e.isWin&&(0==e.winActionState?e.moveLogic(e.winDirection):1==e.winActionState?(e.moveLogic(e.winDirection),e.winActionState=2):2==e.winActionState&&(cc.log("game over"),Game.EventCenter.DispatchEvent(Game.MessageType.GAME_WIN))),e.isMoving=!1},isCanMove:function(e,t){if(this.isMoving||!this.snakeNode||this.isWin)return!1;var i=this.snakeNode,n=i.getHeadCurGID(),o=Game.MapUtil.GetNextGID(e,n),a=Game.MapUtil.GetMapTerrainGID();if(!t&&i.dropComponent.droping)return!1;if(l.IsContainElement(a,o))return!1;for(var s=0;s<i.bodyNode.bodyLength;s++){if(o==i.bodyNode.getSectionGID(s))return!1}if(i.tailNode.getGID()==o)return!1;var c=Game.MapUtil.GetAllStoneGID();if(l.IsContainElement(c,o)){var r=Game.MapUtil.GetNextGID(e,o);if(0==Game.MapUtil.IsNull(r)||l.IsContainElement(a,r))return!1}return!0},isNotMove:function(){if(this.snakeNode.dropComponent.droping)return!1;if(this.snakeNode.isVertical())return!this.isCanMove(n.MD_Left,!0)&&!this.isCanMove(n.MD_Right,!0);for(var e=n.MD_Left;e<=n.MD_Down;e++)if(this.isCanMove(e,!0))return!1;return!0}});t.exports=o,cc._RF.pop()},{ConstDefine:"ConstDefine",Util:"Util"}],NetManager:[function(e,t,i){"use strict";cc._RF.push(t,"a425eWpii9PaayWgLkMnzeV","NetManager"),window.Game=window.Game||{},window.Game.NetManager={m_xhr:null,connectP:function(e,t){},onOpen:function(e){},getXMLHttpRequest:function(){return XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},onMessage:function(){var e=this.m_xhr;try{if(4==e.readyState)if(200==e.status)JSON.parse(e.responseText);else this.onError("Net Status Error, Status = "+e.status)}catch(e){}},onError:function(e){cc.Log(e)},sendMsg:function(e,t,i,n){if(null!=window.wx){wx.request({url:t,data:i,success:function(e){var t=e.data;0==t.errno||console.log("服务器错误，请重新尝试",t.errmsg),n(t),console.log("服务器相应数据",t)}})}}},cc._RF.pop()},{}],PanelItem:[function(e,t,i){"use strict";cc._RF.push(t,"319e4ZE9glCCKtCLjmx8q87","PanelItem"),cc.Class({extends:cc.Component,properties:{imgSp:{displayName:"图表icon",default:null,type:cc.Sprite}},onLoad:function(){},setItemData:function(e){this.directInfo=e,this.createImage(e.img_url,this.imgSp.node),this.tryCutGameName(e.name)},tryCutGameName:function(e){var t=e;4<e.length&&(t=e.substring(0,4)+"..."),this.node.getChildByName("name").getComponent(cc.Label).string=t},onBtnClickItem:function(){null!=window.wx&&wx.navigateToMiniProgram({appId:this.directInfo.app_id,path:this.directInfo.path,extraData:{gameId:this.directInfo.game_id},envVersion:"release",success:function(){},fail:function(e){}})},createImage:function(e,n){if(null!=window.wx)try{var i=wx.createImage();i.onload=function(){try{var e=new cc.Texture2D;e.initWithElement(i),e.handleLoadedTexture();var t=new cc.SpriteFrame(e);n.getComponent(cc.Sprite).spriteFrame=t}catch(e){console.log("load image error")}},i.src=e}catch(e){console.log("createImage error")}else cc.loader.load({url:e,type:"jpg"},function(e,t){var i=new cc.SpriteFrame(t);n.getComponent(cc.Sprite).spriteFrame=i})}}),cc._RF.pop()},{}],PopUpLayer:[function(e,t,i){"use strict";cc._RF.push(t,"5b81dk9a3tJh4rkVT5KbALg","PopUpLayer");e("GlobalVar");var n=e("Util");cc.Class({extends:cc.Component,properties:{popUpNode:cc.Node,maskLayer:cc.Node,watchBtn:cc.Node,closeBtn:cc.Node,context:cc.Node},callback:null,onLoad:function(){this.watchBtn.on("click",this.watchClicked.bind(this)),this.closeBtn.on("click",this.closeClicked.bind(this))},addContext:function(e){this.context&&(1==e?n.SetNodeTexture(this.context,"cishu"):2==e&&n.SetNodeTexture(this.context,"gamescene/chonghzi"))},watchClicked:function(){this.callback&&this.callback(),this.node.destroy()},closeClicked:function(){this.node.destroy()},show:function(e){this.callback=e,Game.PopUpMgr.Show_ScaleEffect(this.popUpNode,GameConfig.PopUpDuration)},onDestroy:function(){}}),cc._RF.pop()},{GlobalVar:"GlobalVar",Util:"Util"}],PopUpMgr:[function(e,t,i){"use strict";cc._RF.push(t,"f3b2eAC1U5DUbFv58COq2lg","PopUpMgr"),window.Game=window.Game||{},window.Game.PopUpMgr={Show_ScaleEffect:function(e,t){null==t&&(t=GameConfig.PopUpDuration),e.active=!0,e.setScale(.1,.1);var i=new cc.scaleTo(t,1,1);new cc.scaleTo(t,1,1);e.runAction(cc.sequence(i,cc.callFunc(function(){e.setScale(1,1)})))},Hide_ScaleEffect:function(e,t){null==t&&(t=GameConfig.PopUpDuration);var i=new cc.scaleTo(t,0,0);e.runAction(new cc.sequence(i,cc.callFunc(function(){e.active=!1})))}},cc._RF.pop()},{}],PropUtil:[function(e,t,i){"use strict";cc._RF.push(t,"b2ba2bQP35KnYNiT5c84bAt","PropUtil");e("GlobalVar");t.exports={GetPropID:function(){return 7},PropRotate:{1:135,2:90,3:180,4:225,5:45,6:0,7:270,8:315},PropList:{1:"99",2:"10",3:"5",4:"2",5:"随机红包",6:"0.2",7:"0.1",8:"继续努力"},PropType:{1:1,2:1,3:1,4:1,5:2,6:1,7:1,8:3},RedPacketList:{1:"0.2",2:"0.3"}},cc._RF.pop()},{GlobalVar:"GlobalVar"}],RankListScene:[function(e,t,i){"use strict";cc._RF.push(t,"0a230oiED1DH56n/osPQAIB","RankListScene");var n=e("Util"),o=e("WXHelper"),a=e("SceneCom");cc.Class({extends:a,properties:{returnBtn:cc.Node,rankingScrollView:cc.Sprite},onLoad:function(){var e=this;this.tempTime=0,this.returnBtn.on(cc.Node.EventType.TOUCH_END,function(){e.ranklistbtnClicked()}),n.ScreenAdaptation(this.rankingScrollView.node),this.tex=o.FetchFriendRankList()},ranklistbtnClicked:function(){Game.SceneMgr.switchScene(Game.SceneType.StartScene)},_updateSubDomainCanvas:function(){null!=window.sharedCanvas&&this.tex&&(this.tex.initWithElement(window.sharedCanvas),this.tex.handleLoadedTexture(),this.rankingScrollView.spriteFrame=new cc.SpriteFrame(this.tex))},update:function(e){this.tempTime+=e,this.tempTime>=GameConfig.FetchFriendRankListUpdateTime&&(this.tempTime=0,this._updateSubDomainCanvas())},onDestroy:function(){cc.log("RanklistScene--\x3e>>onDestroy"),o.ClearSharedCanvas(),this.rankingScrollView.spriteFrame=null}}),cc._RF.pop()},{SceneCom:"SceneCom",Util:"Util",WXHelper:"WXHelper"}],SceneCom:[function(e,t,i){"use strict";cc._RF.push(t,"84d50+SeepBiIUArlC+mfFM","SceneCom"),cc.Class({extends:cc.Component,doCtor:function(){cc.log(this.name,"-------------\x3e>>doCtor")},doEnter:function(){cc.log(this.name,"-------------\x3e>>doEnter"),this.node.active=!0},doExit:function(){cc.log(this.name,"-------------\x3e>>doExit"),this.node.x=0,this.node.y=0,this.node.active=!1,this.node.stopAllActions()},frameOnMove:function(e){}}),cc._RF.pop()},{}],SceneMgr:[function(e,t,i){"use strict";cc._RF.push(t,"7dc0729znJEwKMDwxXZhJqi","SceneMgr"),window.Game=window.Game||{},cc.Class({extends:cc.Component,properties:{},curScene:null,onLoad:function(){Game.SceneMgr=this,cc.game.addPersistRootNode(this.node)},start:function(){},switchScene:function(e){var t=this.getSceneByType(e);cc.director.loadScene(t)},hideAllScene:function(){},getSceneByType:function(e){var t=null;switch(e){case Game.SceneType.StartScene:t="StartScene";break;case Game.SceneType.SelectScene:t="SelectScene";break;case Game.SceneType.RanklistScene:t="RankListScene";break;case Game.SceneType.GameScene:t="GameScene";break;case Game.SceneType.LoadingScene:t="LoadingScene"}return t}}),Game.SceneType={StartScene:1,SelectScene:2,RanklistScene:3,GameScene:4,LoadingScene:5},cc._RF.pop()},{}],SelectScene:[function(e,t,i){"use strict";cc._RF.push(t,"9c3a1x5Gk9JfYRAoTD86bBD","SelectScene");var n=e("SceneCom");cc.Class({extends:n,properties:{returnBtn:{default:null,type:cc.Node},levelLayer:{default:null,type:cc.Node},leftBtn:{default:null,type:cc.Node},rightBtn:{default:null,type:cc.Node},curPage:1},pageView:null,onLoad:function(){var t=this;this.pageView=this.levelLayer.getComponent(cc.PageView),this.returnBtn.on(cc.Node.EventType.TOUCH_END,function(e){t.returnClicked()}),this.leftBtn.on(cc.Node.EventType.TOUCH_END,function(e){t.leftBtnClicked()}),this.rightBtn.on(cc.Node.EventType.TOUCH_END,function(e){t.rightBtnClicked()})},returnClicked:function(){cc.log("returnClicked"),Game.AudioManager.playButtonSound(),Game.SceneMgr.switchScene(Game.SceneType.StartScene)},leftBtnClicked:function(){cc.log("leftBtnClicked"),Game.AudioManager.playButtonSound(),this.pageView.scrollToTopLeft(.2)},rightBtnClicked:function(){cc.log("rightBtnClicked"),Game.AudioManager.playButtonSound(),this.pageView.scrollToRight(.2)},frameOnMove:function(e){},onDestroy:function(){}}),cc._RF.pop()},{SceneCom:"SceneCom"}],SendMessage:[function(e,t,i){"use strict";cc._RF.push(t,"1f55deuUN1KgYIGDiNqwCzO","SendMessage"),window.Game=window.Game||{},window.Game.SendMessage={SendLogin:function(e,t,i,n){cc.log("SendLogin: code = ",e,"iv = ",t,"encryted = ",i);var o={code:e,game_id:GameConfig.GameID.toString(),iv:t,encryptedData:i};Game.NetManager.sendMsg("Get",GameConfig.LoginAddr,o,function(e){cc.log("SendLogin == onMessage",e),n(e)})},SendGetGameListMessage:function(e,t){var i={game_id:GameConfig.GameID,location:e};console.log("发送获取游戏列表的消息:",i);Game.NetManager.sendMsg("GET",GameConfig.GetGameList,i,function(e){0==e.errno&&t(e.data)})},SendPassLevelTime:function(e,t){cc.log("SendPassLevelTime:",e,t);var i={user_id:Game.GlobalVar.userID.toString(),level_id:e.toString(),time:t.toString(),game_id:GameConfig.GameID.toString()};Game.NetManager.sendMsg("POST",GameConfig.SendPassLevelTimeAddr,i,function(e){cc.log("SendPassLevelTime == onMessage",e)})},SendGetPassLevelMinTime:function(e){cc.log("SendGetPassLevelMinTime:",e);var t={level_id:e.toString(),game_id:GameConfig.GameID.toString()};Game.NetManager.sendMsg("Get",GameConfig.GetPassLevelTimeAddr,t,function(e){cc.log("SendGetPassLevelMinTime == onMessage",e),0==e.errno?Game.EventCenter.DispatchEvent(Game.MessageType.Game_MIN_TIME_REP,e.data.time):2007==e.errno&&Game.EventCenter.DispatchEvent(Game.MessageType.Game_MIN_TIME_REP_NO_DATA)})},SendGetConfigMessage:function(){cc.log("SendGetConfigMessage:");var e={game_id:GameConfig.GameID.toString()};Game.NetManager.sendMsg("Get",GameConfig.GetConfigAddr,e,function(e){cc.log("SendGetConfigMessage == onMessage",e),0==e.errno?GameLocalData.SaveConfigData(e.data):e.errno})},SendGetGameAdMessage:function(e,t){cc.log("SendGetGameAdMessage:");var i={gid:e};Game.NetManager.sendMsg("Get",GameConfig.GetGameADAddr,i,function(e){cc.log("SendGetConfigMessage == onMessage",e),0==e.errno&&t(e.data)})}},cc._RF.pop()},{}],SnakeBody:[function(e,t,i){"use strict";cc._RF.push(t,"640e2TxJlBIDKppRJgETHHX","SnakeBody");var n=e("SnakeSection");t.exports=function(){this.bodyLength=0,this.parent=arguments[0],this.sectionVec=null,this.addSection=function(e){null==this.sectionVec&&(this.sectionVec=[]);var t=new n(e);this.parent.addChild(t,8),t.name=t.name+this.sectionVec.length,this.sectionVec.push(t),this.bodyLength++,this.setFirstSection(e)},this.getAllSection=function(){return this.sectionVec},this.stopAllActions=function(){for(var e=0;e<this.bodyLength;e++)this.sectionVec[e]&&this.sectionVec[e].stopAllActions()},this.getSectionByGID=function(e){for(var t=0;t<this.bodyLength;t++)if(this.sectionVec[t].gid==e)return this.sectionVec[t];return null},this.getSectionGID=function(e){if(this.sectionVec.length<=0)return 0;var t=this.sectionVec.length-1-e;return this.sectionVec[t]?this.sectionVec[t].getGID():0},this.getSectionDirection=function(e){if(this.sectionVec.length<=0)return 0;var t=this.sectionVec.length-1-e;return this.sectionVec[t]?this.sectionVec[t].getDirection():0},this.getSectionNextGID=function(e){if(this.sectionVec.length<=0)return 0;var t=this.sectionVec.length-1-e;return this.sectionVec[t]?this.sectionVec[t].getNextGID():0},this.setSectionNextGID=function(e,t){if(this.sectionVec.length<=0)return 0;var i=this.sectionVec.length-1-e;this.sectionVec[i]&&this.sectionVec[i].setNextGID(t)},this.setSectionDirectioin=function(e,t){if(this.sectionVec.length<=0)return 0;var i=this.sectionVec.length-1-e;this.sectionVec[i]&&this.sectionVec[i].setDirection(t)},this.setDirection=function(e){for(var t=0;t<this.bodyLength;t++)this.sectionVec[t].setDirection(e)},this.doExit=function(){for(var e=0;e<this.bodyLength;e++)this.sectionVec[e].doExit()},this.setMyChangedDirtyFlag=function(e){for(var t=0;t<this.bodyLength;t++)this.sectionVec[t].setMyChangedDirtyFlag(e)},this.setFirstSection=function(e){for(var t=0;t<this.bodyLength;t++)this.sectionVec[t].gid==e?this.sectionVec[t].isFrist=!0:this.sectionVec[t].isFrist=!1},this.setSectionNum=function(e){this.bodyLength=e},this.getSectionNum=function(){return this.bodyLength},this.moveToLeft=function(){for(var e=0;e<this.bodyLength;e++)this.sectionVec[e].moveToLeft()},this.moveToRight=function(){for(var e=0;e<this.bodyLength;e++)this.sectionVec[e].moveToRight()},this.moveToUp=function(){for(var e=0;e<this.bodyLength;e++)this.sectionVec[e].moveToUp()},this.moveToDown=function(){for(var e=0;e<this.bodyLength;e++)this.sectionVec[e].moveToDown()},this.doDropAction=function(){for(var e=0;e<this.bodyLength;e++)this.sectionVec[e].doDropAction()},this.doMoveAction=function(){for(var e=0;e<this.bodyLength;e++)this.sectionVec[e].doMoveAction()},this.getLastSection=function(){return this.sectionVec[0]},this.setSnake=function(e){for(var t=0;t<this.bodyLength;t++)this.sectionVec[t].setSnake(e)},this.frameOnMove=function(e){for(var t=0;t<this.bodyLength;t++)this.sectionVec[t].frameOnMove(e)},this.gameOver=function(){for(var e=0;e<this.bodyLength;e++)this.sectionVec[e].gameOver()}},cc._RF.pop()},{SnakeSection:"SnakeSection"}],SnakeControler:[function(e,t,i){"use strict";cc._RF.push(t,"81462iC9BpEJI+vWZ6zjvPp","SnakeControler");var n=e("Util");cc.Class({extends:cc.Component,properties:{leftBtn:cc.Node,rightBtn:cc.Node,upBtn:cc.Node,downBtn:cc.Node},onLoad:function(){this.node.zIndex=11,n.RegKeyUpEvent(this.onKeyUp.bind(this)),n.RegBtnTouchEndEvent(this.leftBtn,this.leftBtnClicked.bind(this)),n.RegBtnTouchEndEvent(this.rightBtn,this.rightBtnClicked.bind(this)),n.RegBtnTouchEndEvent(this.upBtn,this.upBtnClicked.bind(this)),n.RegBtnTouchEndEvent(this.downBtn,this.downBtnClicked.bind(this))},leftBtnClicked:function(){Game.EventCenter.DispatchEvent(Game.MessageType.Ctr_Snake_Move_To_Left)},rightBtnClicked:function(){Game.EventCenter.DispatchEvent(Game.MessageType.Ctr_Snake_Move_To_Right)},upBtnClicked:function(){Game.EventCenter.DispatchEvent(Game.MessageType.Ctr_Snake_Move_To_Up)},downBtnClicked:function(){Game.EventCenter.DispatchEvent(Game.MessageType.Ctr_Snake_Move_To_Down)},onKeyUp:function(e){switch(e.keyCode){case cc.KEY.left:Game.EventCenter.DispatchEvent(Game.MessageType.Ctr_Snake_Move_To_Left);break;case cc.KEY.right:Game.EventCenter.DispatchEvent(Game.MessageType.Ctr_Snake_Move_To_Right);break;case cc.KEY.up:Game.EventCenter.DispatchEvent(Game.MessageType.Ctr_Snake_Move_To_Up);break;case cc.KEY.down:Game.EventCenter.DispatchEvent(Game.MessageType.Ctr_Snake_Move_To_Down)}}}),cc._RF.pop()},{Util:"Util"}],SnakeHead:[function(e,t,i){"use strict";cc._RF.push(t,"47143VdnaxMJZgxFJQJzbPj","SnakeHead");var n=e("SnakeNode"),o=e("ConstDefine").MoveDirection,a=e("ConstDefine").SnakeDirection;cc.Class({extends:n,direction:null,curState:null,ctor:function(){this.setName("SnakeHead"),this.curState=0;var e=parseInt(Game.MapUtil.GetProperty("startPos_1","direction"));0<=e&&(this.direction=e),this.sprite.spriteFrame.setTexture(cc.url.raw("resources/gamescene/head1.png")),this.refreshPos(arguments[0]),this.doRotateAction()},refreshPos:function(e){if(this.sprite){var t=this.getNewPos(e);this.setPosition(t)}},getNewPos:function(e){var t=Game.MapUtil.GetMapBlockSize().width,i=Game.MapUtil.ConvertGIDToPos(e),n=.5*(this.width-t);switch(this.direction){case o.MD_Left:i.x-=n;break;case o.MD_Right:i.x+=n;break;case o.MD_Up:i.y+=n;break;case o.MD_Down:i.y-=n;break;default:i.x+=n}return this.isChanged&&(i.x+=.5*(cc.director.getWinSize().width-1334),i=this.parent.convertToNodeSpaceAR(i)),i},setDirection:function(e){this.preDirection=this.direction,this.direction=e},moveFinish:function(){if(Game.GlobalVar.isEatedApple)return this.doMeetFace(),void(Game.GlobalVar.isEatedApple=!1);this.doNormalFace()},dropFinish:function(){this.snakes.dropFinish()},doTransfrom:function(){this.doRotateAction();var e=Game.MapUtil.GetMapBlockSize().width,t=.5*(this.width-e);this.direction==a.SD_Up&&this.preDirection==a.SD_Right?(this.y+=t,this.x-=t):this.direction==a.SD_Right&&this.preDirection==a.SD_Up?(this.x+=t,this.y-=t):this.direction==a.SD_Down&&this.preDirection==a.SD_Right?(this.x-=t,this.y-=t):this.direction==a.SD_Left&&this.preDirection==a.SD_Down?(this.x-=t,this.y+=t):this.direction==a.SD_Up&&this.preDirection==a.SD_Left?(this.x+=t,this.y+=t):this.direction==a.SD_Left&&this.preDirection==a.SD_Up?(this.x-=t,this.y-=t):this.direction==a.SD_Right&&this.preDirection==a.SD_Down?(this.x+=t,this.y+=t):this.direction==a.SD_Down&&this.preDirection==a.SD_Left&&(this.x+=t,this.y-=t)},doRotateAction:function(){var e=0;switch(this.direction){case o.MD_Left:e=-180;break;case o.MD_Right:e=0;break;case o.MD_Up:e=-90;break;case o.MD_Down:e=90}this.rotation=e,this._super()},doNormalFace:function(){this.sprite.spriteFrame=new cc.SpriteFrame(cc.url.raw("resources/gamescene/head1.png"))},doAtTheMouthFace:function(){this.sprite.spriteFrame=new cc.SpriteFrame(cc.url.raw("resources/gamescene/head2.png"))},doMeetFace:function(){this.sprite.spriteFrame=new cc.SpriteFrame(cc.url.raw("resources/gamescene/head3.png"))},doDespairFace:function(){this.sprite.spriteFrame=new cc.SpriteFrame(cc.url.raw("resources/gamescene/head5.png"))}}),cc._RF.pop()},{ConstDefine:"ConstDefine",SnakeNode:"SnakeNode"}],SnakeNode:[function(e,t,i){"use strict";cc._RF.push(t,"65aadxBxSVNMoR6JkdplJ5/","SnakeNode");e("ConstDefine").MoveDirection;var n=e("Entity"),o=(e("MoveComponent").MoveComponent,e("ConstDefine").SnakeDirection);cc.Class({extends:n,snakes:null,preDirection:null,direction:null,moveComponent:null,isChanged:null,ctor:function(){this.setName("SnakeNode"),this.doEnter()},doEnter:function(){this.isChanged=!1,this.direction=o.SD_Right,this.preDirection=o.SD_Right,this.moveComponent=this.addComponent("MoveComponent")},doExit:function(){this.snakes=null,this.moveComponent=null},changeParent:function(e){var t=this.convertToWorldSpaceAR(cc.Vec2.ZERO),i=(this.position,e.convertToNodeSpaceAR(t));this.position=i,this.parent=e,this.isChanged=!0},moveFinish:function(){},setDirection:function(e){this.preDirection=this.direction,this.direction=e},getDirection:function(){return this.direction},doRotateAction:function(){},getNewPos:function(e){var t=Game.MapUtil.ConvertGIDToPos(e);return this.isChanged&&(t.x+=.5*(cc.director.getWinSize().width-1334),t=this.parent.convertToNodeSpaceAR(t)),t},doTransfrom:function(){},setSnake:function(e){this.snakes=e},frameOnMove:function(e){this.moveComponent.frameOnMove(e)}}),cc._RF.pop()},{ConstDefine:"ConstDefine",Entity:"Entity",MoveComponent:"MoveComponent"}],SnakeSection:[function(e,t,i){"use strict";cc._RF.push(t,"b9850esvjRPK7fw7Q0H3Oyb","SnakeSection");var n=e("SnakeNode"),o=(e("Util"),e("ConstDefine").MoveDirection,e("ConstDefine").SnakeDirection);cc.Class({extends:n,newSprite:null,isFrist:null,ctor:function(e){this.isFrist=!1,this.setName("SnakeSection"),this.sprite.spriteFrame.setTexture(cc.url.raw("resources/gamescene/body.png"))},move:function(){this.doMoveAction()},moveFinish:function(){if(this.direction==o.SD_Left_Up||this.direction==o.SD_Left_Down||this.direction==o.SD_Right_Down||this.direction==o.SD_Right_Up){this.sprite.spriteFrame=new cc.SpriteFrame(cc.url.raw("resources/gamescene/body_a.png"));var e=this.getNewSprite();e&&(e.active=!1)}this.doRotateAction(),this.isFrist&&this.snakes.moveFinish()},dropFinish:function(){var e=this.getNewSprite();e&&(e.active=!1)},doRotateAction:function(){var e=0;this.direction==o.SD_Right_Down?e=180:this.direction==o.SD_Left_Down?e=270:this.direction==o.SD_Right_Up?e=90:this.direction==o.SD_Left&&(e=180),this.rotation=e},doTransfrom:function(){if(this.direction==o.SD_Up||this.direction==o.SD_Down||this.direction==o.SD_Left||this.direction==o.SD_Right)this.sprite.spriteFrame=new cc.SpriteFrame(cc.url.raw("resources/gamescene/body.png"));else if(this.direction==o.SD_Left_Up){if(t=this.getNewSprite()){var e=Game.MapUtil.ConvertGIDToPos(this.nextGID);this.isChanged&&(e.x+=.5*(cc.director.getWinSize().width-1334),e=this.parent.convertToNodeSpaceAR(e)),t.rotation=0,t.position=e,t.zIndex=this.zIndex,t.active=!0}}else if(this.direction==o.SD_Right_Down){if(t=this.getNewSprite()){t.rotation=180;e=Game.MapUtil.ConvertGIDToPos(this.nextGID);this.isChanged&&(e.x+=.5*(cc.director.getWinSize().width-1334),e=this.parent.convertToNodeSpaceAR(e)),t.position=e,t.active=!0,t.zIndex=this.zIndex}}else if(this.direction==o.SD_Left_Down){if(t=this.getNewSprite()){t.rotation=270;e=Game.MapUtil.ConvertGIDToPos(this.nextGID);this.isChanged&&(e.x+=.5*(cc.director.getWinSize().width-1334),e=this.parent.convertToNodeSpaceAR(e)),t.position=e,t.active=!0,t.zIndex=this.zIndex}}else if(this.direction==o.SD_Right_Up){var t;if(t=this.getNewSprite()){t.rotation=90;e=Game.MapUtil.ConvertGIDToPos(this.nextGID);this.isChanged&&(e.x+=.5*(cc.director.getWinSize().width-1334),e=this.parent.convertToNodeSpaceAR(e)),t.position=e,t.active=!0,t.zIndex=this.zIndex}}},getNewSprite:function(){if(!this.newSprite){var e=new cc.Node("Section_NewSprite");e.addComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(cc.url.raw("resources/gamescene/body_a.png")),this.parent.addChild(e),this.newSprite=e}return this.newSprite},changeParent:function(e){this._super(e),this.getNewSprite().parent=e},setDirection:function(e){this.preDirection=this.direction,this.direction=e}}),cc._RF.pop()},{ConstDefine:"ConstDefine",SnakeNode:"SnakeNode",Util:"Util"}],SnakeTail:[function(e,t,i){"use strict";cc._RF.push(t,"9e275kTXT5KLZsxuiOxNZLO","SnakeTail");var n=e("SnakeNode");e("ConstDefine").SnakeDirection;cc.Class({extends:n,previouNode:null,newSprite:null,ctor:function(){this.setName("SnakeTail"),this.sprite.spriteFrame.setTexture(cc.url.raw("resources/gamescene/tail.png"))},move:function(e){this.doRotateAction(e),this.doMoveAction()},moveFinish:function(){this.doRotateAction();var e=this.getNewSprite();e&&(e.active=!1)},doTransfrom:function(){var e=this.getNewSprite();if(e){var t=Game.MapUtil.ConvertGIDToPos(this.nextGID);this.isChanged&&(t.x+=.5*(cc.director.getWinSize().width-1334),t=this.parent.convertToNodeSpaceAR(t)),e.position=t,e.zIndex=this.zIndex-1,e.active=!0,e.rotation=this.rotation}},getNewSprite:function(){if(!this.newSprite){var e=new cc.Node("Tail_NewSprite"),t=e.addComponent(cc.Sprite);t.spriteFrame=new cc.SpriteFrame,t.spriteFrame.setTexture(cc.url.raw("resources/gamescene/tail.png")),this.parent.addChild(e),this.newSprite=e}return this.newSprite},changeParent:function(e){this._super(e),this.getNewSprite().parent=e},doRotateAction:function(){var e=Game.MapUtil.GetUpGID(this.nextGID),t=Game.MapUtil.GetDownGID(this.nextGID),i=Game.MapUtil.GetLeftGID(this.nextGID),n=Game.MapUtil.GetRightGID(this.nextGID),o=this.snakes.bodyNode.getLastSection().getNextGID();e==o?this.rotation=-90:t==o?this.rotation=90:i==o?this.rotation=-180:n==o&&(this.rotation=0)}}),cc._RF.pop()},{ConstDefine:"ConstDefine",SnakeNode:"SnakeNode"}],Snakes:[function(e,t,i){"use strict";cc._RF.push(t,"33071qy1a5BsYBpPe97/qWS","Snakes");e("ConstDefine").MoveDirection;var n=e("SnakeHead"),o=e("SnakeBody"),a=e("SnakeTail"),s=e("Util"),c=e("BaseNode");cc.Class({extends:c,headNode:null,bodyNode:null,tailNode:null,isWin:null,dropComponent:null,winDirection:null,ctor:function(){this.setAnchorPoint(cc.p(0,0)),this.setPosition(-667,-375),this.doEnter()},doEnter:function(){this.isWin=!1,this.winDirection=0,this.dropComponent=this.addComponent("DropComponent")},doExit:function(){this.removeAllChildren(),this.headNode.doExit(),this.bodyNode.doExit(),this.tailNode.doExit(),this.dropComponent=null,this.headNode=null,this.bodyNode=null,this.tailNode=null},setMyChangedDirtyFlag:function(e){this._super(e),this.headNode.setMyChangedDirtyFlag(e),this.bodyNode.setMyChangedDirtyFlag(e),this.tailNode.setMyChangedDirtyFlag(e)},create:function(){var e=this;if(e){var t=Game.MapUtil.GetStartGID();this.headNode=new n(t.headGID),this.bodyNode=new o(e),this.tailNode=new a(t.tailGID),this.bodyNode.addSection(t.bodyGID),e.addChild(this.headNode,10),e.addChild(this.tailNode,9),this.headNode.setSnake(this),this.bodyNode.setSnake(this),this.tailNode.setSnake(this),this.tailNode.doRotateAction(),e.zIndex=10}},isStatic:function(){return!this.dropComponent||!this.dropComponent.droping},getHeadCurGID:function(){return this.headNode.getGID()},move:function(){this.tailNode.move(),this.bodyNode.move(),this.headNode.move()},refreshZIndex:function(){},getAllNode:function(){var e=[];return this.tailNode&&e.push(this.tailNode),e=e.concat(this.bodyNode.getAllSection()),this.headNode&&e.push(this.headNode),e},getAllGID:function(){var e=[];if(this.headNode&&e.push(this.headNode.getGID()),this.tailNode&&e.push(this.tailNode.getGID()),this.bodyNode)for(var t=0;t<this.bodyNode.bodyLength;t++){var i=this.bodyNode.getSectionGID(t);e.push(i)}return e},getMaxGID:function(){for(var e=this.getAllGID(),t=0,i=0;i<e.length;i++){var n=e[i];(a=Game.MapUtil.ConvertGIDToTID(n)).y>t&&(t=a.y)}var o=[];for(i=0;i<e.length;i++){var a;n=e[i];(a=Game.MapUtil.ConvertGIDToTID(n)).y==t&&o.push(n)}return o},getNodeByGID:function(e){return e==this.headNode.gid?this.headNode:e==this.tailNode.gid?this.tailNode:this.bodyNode.getSectionByGID(e)},getAllNextGID:function(){var e=[];e.push(this.headNode.getNextGID()),e.push(this.tailNode.getNextGID());for(var t=0;t<this.bodyNode.bodyLength;t++){var i=this.bodyNode.getSectionNextGID(t);e.push(i)}return e},eatApple:function(e,t){this.doMeetFace(),this.bodyNode.addSection(this.headNode.getGID()),this.bodyNode.setSnake(this),this.headNode.setNextGID(t),this.headNode.setDirection(e),Game.EventCenter.DispatchEvent(Game.MessageType.Update_Game_Object_ZIndex),this.setMyChangedDirtyFlag(!0)},changeParent:function(e){if(e)for(var t=this.getAllNode(),i=0;i<t.length;i++){t[i].changeParent(e)}},isVertical:function(){for(var e=this.getAllGID(),t=this.headNode.getGID(),i=this.bodyNode.bodyLength+2,n=0;n<i-1;n++){var o=Game.MapUtil.GetDownGID(t);if(!s.IsContainElement(e,o))return!1;t=o}return!0},doDropAction:function(){Game.GlobalVar.isDroping=!0,this.headNode.doDropAction(),this.bodyNode.doDropAction(),this.tailNode.doDropAction()},moveFinish:function(){this.myDropDirtyFlag=!0,Game.EventCenter.DispatchEventSync(Game.MessageType.Snake_Move_Finish),Game.EventCenter.DispatchEventSync(Game.MessageType.Check_Stone_Drop),Game.EventCenter.DispatchEventSync(Game.MessageType.CheckIsNotMove)},dropFinish:function(){Game.GlobalVar.isDroping=!1,this.headNode.y<0?Game.EventCenter.DispatchEvent(Game.MessageType.GAME_FAIL):(this.dropComponent.dropFinish(),this.myDropDirtyFlag=!0,Game.EventCenter.DispatchEventSync(Game.MessageType.Snake_Drop_Finish),Game.EventCenter.DispatchEventSync(Game.MessageType.Check_Stone_Drop))},outLevel:function(e){},doNormalFace:function(){this.headNode.doNormalFace()},doAtTheMouthFace:function(){this.headNode.doAtTheMouthFace()},doMeetFace:function(){this.headNode.doMeetFace()},doDespairFace:function(){this.headNode.doDespairFace()},gameOver:function(){},win:function(){},failed:function(){},frameOnMove:function(e){this.headNode&&this.headNode.frameOnMove(e),this.bodyNode&&this.bodyNode.frameOnMove(e),this.tailNode&&this.tailNode.frameOnMove(e),this.dropComponent&&this.dropComponent.frameOnMove(e)},onDestroy:function(){cc.log("Snakes--\x3eonDestroy")}}),cc._RF.pop()},{BaseNode:"BaseNode",ConstDefine:"ConstDefine",SnakeBody:"SnakeBody",SnakeHead:"SnakeHead",SnakeTail:"SnakeTail",Util:"Util"}],StartScene:[function(e,t,i){"use strict";cc._RF.push(t,"11772T7zwVFjL6Ns7U47bBM","StartScene");var n=e("LevelData"),a=e("WXHelper"),o=(e("GameRes"),e("SceneCom")),s=e("AdvertiseMgr"),c=e("AdvertiseConfig");cc.Class({extends:o,properties:{musicBtn:{default:null,type:cc.Node},vibrationBtn:{default:null,type:cc.Node},ranklistBtn:{default:null,type:cc.Node},shareBtn:{default:null,type:cc.Node},startBtn:{default:null,type:cc.Node},moreGame:{default:null,type:cc.Node},cblBtn:cc.Node,cblPrefab:cc.Prefab},musicBtnState:null,vibrationBtnState:null,onLoad:function(){var t=this;this.musicBtnState=1,this.vibrationBtnState=1,this.moreGame.on(cc.Node.EventType.TOUCH_END,function(e){t.moreGameBtnClicked()}),this.musicBtn.on(cc.Node.EventType.TOUCH_END,function(e){t.musicBtnClicket()}),this.vibrationBtn.on(cc.Node.EventType.TOUCH_END,function(e){t.vibrationBtnClick()}),this.ranklistBtn.on(cc.Node.EventType.TOUCH_END,function(e){t.ranklistBtnClicked()}),this.shareBtn.on(cc.Node.EventType.TOUCH_END,function(e){t.shareBtnClicked()}),this.startBtn.on(cc.Node.EventType.TOUCH_END,function(e){t.startBtnClicked()}),this.cblBtn.on(cc.Node.EventType.TOUCH_END,function(){t.cblBtnClicked()});n.ReadLevelData();a.UploadUserCloudStorage(n.GenerateUserCloudData()),n.DisposeUnusualData(),Game.SendMessage.SendGetConfigMessage()},start:function(){var o=this,e=GameLocalData.ReadUserID();a.IsWXContext()&&null==e?(this.startBtn.active=!1,a.CreateUserInfoButton(function(n){o.login(function(e,t){if(1==e){var i=GameLocalData.ReadUserID();o.loginComplete(i)}else 2==e?Game.SendMessage.SendLogin(t,n.iv,n.encryptedData,function(e){o.loginComplete(e.data.uid)}):3==e&&o.loginComplete(-1)})})):(Game.GlobalVar.userID=e,this.startBtn.active=!0),s.CreateBannerAd(c.ADConfig_HomePage_Bottom),Game.AudioManager.playBackgroundSound()},cblBtnClicked:function(){if(this.cblPrefab){var e=cc.instantiate(this.cblPrefab);this.node.addChild(e,1e3)}},moreGameBtnClicked:function(){Game.AudioManager.playButtonSound(),a.MoreGame()},startBtnClicked:function(){var e=GameLocalData.ReadUserID();a.IsWXContext()?this.loginComplete(e,1):this.loginComplete(19951214,1)},ranklistBtnClicked:function(){Game.AudioManager.playButtonSound(),s.DestroyBannerAd(),Game.SceneMgr.switchScene(Game.SceneType.RanklistScene)},shareBtnClicked:function(){Game.AudioManager.playButtonSound(),a.Share()},musicBtnClicket:function(){Game.AudioManager.playButtonSound(),0==this.musicBtnState?this.musicBtnState=1:this.musicBtnState=0,this.refreshMusicBtnState()},vibrationBtnClick:function(){Game.AudioManager.playButtonSound(),0==this.vibrationBtnState?this.vibrationBtnState=1:this.vibrationBtnState=0,this.refreshVibrationBtnState()},refreshMusicBtnState:function(){var e=this.musicBtn.getComponent(cc.Sprite);e&&(0==this.musicBtnState?(Game.AudioManager.closeSound(),e.spriteFrame.setTexture(cc.url.raw("resources/EffectOff.png"))):(Game.AudioManager.openSound(),e.spriteFrame.setTexture(cc.url.raw("resources/EffectOn.png"))))},refreshVibrationBtnState:function(){var e=this.vibrationBtn.getComponent(cc.Sprite);e&&(0==this.vibrationBtnState?e.spriteFrame.setTexture(cc.url.raw("resources/VibrationOff.png")):e.spriteFrame.setTexture(cc.url.raw("resources/VibrationOn.png")))},login:function(e){GameConfig.DebugMode&&GameLocalData.ClearUserID(),a.Login(e)},loginComplete:function(e){cc.log("loginComplete--\x3e>>userid = ",e),s.DestroyBannerAd(),Game.AudioManager.playButtonSound(),e&&0<=e&&(a.DestroyUserInfoBtn(),Game.GlobalVar.userID=e,GameLocalData.SaveUserID(e),Game.SceneMgr.switchScene(Game.SceneType.SelectScene))},onDestroy:function(){}}),cc._RF.pop()},{AdvertiseConfig:"AdvertiseConfig",AdvertiseMgr:"AdvertiseMgr",GameRes:"GameRes",LevelData:"LevelData",SceneCom:"SceneCom",WXHelper:"WXHelper"}],StoneMgr:[function(e,t,i){"use strict";cc._RF.push(t,"56c72bPpnVNA46Al185fRsP","StoneMgr");var a=e("./gameobject/StoneNode");cc.Class({extends:cc.Component,stoneNodeVec:null,ctor:function(){},GenerateStone:function(e){var t=e;if(t){this.stoneNodeVec=[];for(var i=Game.MapUtil.GetAllStoneGID(),n=0;n<i.length;n++){var o=new a(i[n]);t.addChild(o,10),this.stoneNodeVec.push(o)}}},GetAllStoneNode:function(){return this.stoneNodeVec},GetAllStoneGID:function(){for(var e=[],t=0;t<this.stoneNodeVec.length;t++){var i=this.stoneNodeVec[t];e.push(i.gid)}return e},RemoveStoneByGID:function(e){for(var t=0;t<this.stoneNodeVec.length;t++){var i=this.stoneNodeVec[t];i&&i.gid==e&&(i.destroy(),this.stoneNodeVec.splice(t,1))}},Clear:function(){if(this.stoneNodeVec){for(var e=0;e<this.stoneNodeVec.length;e++){var t=this.stoneNodeVec[e];t&&t.doExit()}this.stoneNodeVec.length=0}Game.EventCenter.RemoveEvent(this.uuid)},SetMyDropDirtyFlag:function(){for(var e=0;e<this.stoneNodeVec.length;e++){var t=this.stoneNodeVec[e];t&&t.setMyDropDirtyFlag(!0)}},FrameOnMove:function(e){for(var t=this.stoneNodeVec.length-1;0<=t;t--){(i=this.stoneNodeVec[t])&&i.myDeleteDirtyFlag&&i.RemoveStoneByGID(i.gid)}for(t=0;t<this.stoneNodeVec.length;t++){var i;(i=this.stoneNodeVec[t])&&i.frameOnMove(e)}},onDestroy:function(){cc.log("Stones--\x3eonDestroy")}}),cc._RF.pop()},{"./gameobject/StoneNode":"StoneNode"}],StoneNode:[function(e,t,i){"use strict";cc._RF.push(t,"3512f/PI2dDqbqpX3yf5mFo","StoneNode");var n=e("Entity");e("MoveComponent").MoveComponent,e("DropComponent");cc.Class({extends:n,moveComponent:null,dropComponent:null,ctor:function(){this.setName("StoneNode"),this.moveComponent=this.addComponent("MoveComponent"),this.dropComponent=this.addComponent("DropComponent"),this.sprite.spriteFrame.setTexture(cc.url.raw("resources/gamescene/stone.png"))},doExit:function(){this.moveComponent=null,this.dropComponent=null},doEnter:function(){},getAllGID:function(){var e=[];return e.push(this.gid),e},getMaxGID:function(){return this.getAllGID()},getNodeByGID:function(e){return this},startMove:function(){Game.AudioManager.playPushStoneSound()},moveFinish:function(){this.myDropDirtyFlag=!0},dropFinish:function(){Game.GlobalVar.isStoneDroping=!1,this.y<0?this.setMyDeleteDirtyFlag(!0):(Game.EventCenter.DispatchEvent(Game.MessageType.Stone_Drop_Finish),this.dropComponent.dropFinish(),this.myDropDirtyFlag=!0)},doRotateAction:function(){},frameOnMove:function(e){this.dropComponent.frameOnMove(e),this.moveComponent.frameOnMove(e)}}),cc._RF.pop()},{DropComponent:"DropComponent",Entity:"Entity",MoveComponent:"MoveComponent"}],Util:[function(e,t,i){"use strict";cc._RF.push(t,"c6271/ZpBFIlIqz+FIKsc9f","Util"),t.exports={IsContainElement:function(e,t){if(e)for(var i=0;i<e.length;i++)if(e[i]==t)return!0;return!1},SetNodeTexture:function(n,e){cc.loader.loadRes(e,function(e,t){if(e)cc.log(e);else{var i=n.getComponent(cc.Sprite);i&&(i.spriteFrame=new cc.SpriteFrame(t))}})},CreateSprite:function(e,t){var i=new cc.Node(e);return i&&(i.addComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t)),i},NodeSort:function(e){e.sort(function(e,t){return e.gid<t.gid?1:e.gid>t.gid?-1:0})},Sort:function(e){e.sort(function(e,t){return e<t?1:t<e?-1:0})},SetNodeText:function(e,t){var i=e.getComponent(cc.Label);i&&(i.string=t)},RegBtnClickEvent:function(e,t){e&&t&&e.on("click",t)},RegBtnTouchEndEvent:function(e,t){e&&t&&e.on(cc.Node.EventType.TOUCH_END,t)},RegKeyUpEvent:function(e){e&&cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,e)},RegBtnTouchBeginEvent:function(e,t){e&&t&&e.on(cc.Node.EventType.TOUCH_START,t)},ScreenAdaptation:function(e){e&&.1<cc.director.getWinSize().width/cc.director.getWinSize().height-16/9&&(e.scaleX=cc.director.getWinSize().width/1334)},GetComponent:function(e,t){return e&&t?e.getComponent(t):null},CreateSpriteWithFrame:function(e,t){var i=new cc.Node(e);return i?(i.addComponent(cc.Sprite).spriteFrame=t,i):null},SetNodeSprteFrame:function(e,t){var i=e.getComponent(cc.Sprite);i&&(i.spriteFrame=t)},loadRemoteImg:function(i,e){cc.loader.load({url:e,type:"jpg"},function(e,t){i.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t)})}},cc._RF.pop()},{}],WXHelper:[function(e,t,i){"use strict";cc._RF.push(t,"c0964iRN0BDc4Bi+HDICq9H","WXHelper");e("GlobalVar");var o={userInfoBtn:null,IsWXContext:function(){return null!=window.wx},Login:function(t){if(GameLocalData.ReadUserID())t(1);else if(null!=window.wx){wx.login({success:function(e){cc.log("login success:resCode = "+e.code),t(2,e.code)},fail:function(){cc.log("login fail"),t(3)}})}else t(19)},Share:function(e){if(cc.log("Share"),0!=o.IsWXContext()){var t=cc.game.canvas,i=cc.winSize.width,n=cc.winSize.height;t.toTempFilePath({x:0,y:0,width:i,height:n,destWidth:500,destHeight:400,success:function(e){null!=window.wx&&window.wx.shareAppMessage({title:Game.GlobalVar.ShareText,imageUrl:e.tempFilePath,success:function(e){console.log("分享成功")}})}})}},GetUseInfo:function(e,t){wx.getUserInfo({withCredentials:fales,lang:"zh_CN",success:e,fail:t})},UploadUserCloudStorage:function(e){cc.log("UploadUserCloudStorage"+e),null!=window.wx&&wx.setUserCloudStorage({KVDataList:e,success:function(e){console.log("setUserCloudStorage","success",e)},fail:function(e){console.log("setUserCloudStorage","fail")},complete:function(e){console.log("setUserCloudStorage","ok")}})},FetchFriendRankList:function(){if(null!=window.wx)return window.wx.showShareMenu({withShareTicket:!0}),o.InitSharedCanvas(),window.wx.postMessage({messageType:1}),cc.log("发送消息到子域!---\x3e>>展示好友排行榜"),new cc.Texture2D},GameOverRankList:function(){if(null!=window.wx)return window.wx.showShareMenu({withShareTicket:!0}),o.InitSharedCanvas(),window.wx.postMessage({messageType:2,curLevel:Game.GlobalVar.curLevel}),cc.log("发送消息到子域!---\x3e>>展示游戏结束界面排行榜"),new cc.Texture2D},JJCYPlayer:function(){if(null!=window.wx)return window.wx.showShareMenu({withShareTicket:!0}),o.InitSharedCanvas(),window.wx.postMessage({messageType:3,curLevel:Game.GlobalVar.curLevel}),new cc.Texture2D},InitSharedCanvas:function(){if(null!=window.wx){var e=wx.getOpenDataContext().canvas;e&&(e.width=2*cc.game.canvas.width,e.height=2*cc.game.canvas.height)}},ClearSharedCanvas:function(){if(null!=window.wx){var e=wx.getOpenDataContext().canvas;e&&(e.width=0,e.height=0),window.wx.postMessage({messageType:4}),cc.log("发送消息到子域!---\x3e>>清理画布")}},CreateUserInfoButton:function(t){if(cc.log("CreateUserInfoButton"),null!=window.wx&&Game.SystemInfo){var e=Game.SystemInfo.windowWidth,i=Game.SystemInfo.windowHeight,n=e/cc.winSize.width*364,o=i/cc.winSize.height*126,a=e/2-.5*n,s=.5*i,c=wx.createUserInfoButton({type:"image ",image:"http://gather.51weiwan.com//uploads//file//20180731//06fc14a09a16c33ce4b41e80d69e76fd.png",style:{left:a,top:s,width:n,height:o}});c.onTap(function(e){t(e)}),this.userInfoBtn=c}},DestroyUserInfoBtn:function(){this.userInfoBtn&&this.userInfoBtn.destroy()},GetSystemInfo:function(e){Game.SystemInfo||null!=window.wx&&(Game.SystemInfo=wx.getSystemInfoSync())},MoreGame:function(){if(null!=window.wx){var e=GameLocalData.ReadConfigData();wx.navigateToMiniProgram({appId:e.app_id,path:"",envVersion:"release",success:function(){console.log("跳转到更多游戏成功")},fail:function(e){console.log("跳转到更多游戏失败",e)}})}},ShowToast:function(e){this.IsWXContext()&&wx.showToast({title:e})}};t.exports=o,cc._RF.pop()},{GlobalVar:"GlobalVar"}]},{},["AppleMgr","AudioManager","ComCountDown","ConstDefine","DiCiMgr","DropComponent","EventCenter","GameRes","GlobalVar","LeftPanel","LevelData","LockydrawLayer","MapUtil","MoveComponent","MoveLogic","PanelItem","PopUpMgr","PropUtil","SnakeBody","SnakeControler","SnakeHead","SnakeNode","SnakeSection","SnakeTail","Snakes","StoneMgr","Util","WXHelper","AdvertiseConfig","AdvertiseMgr","AppleNode","BaseNode","DiCiNode","Entity","StoneNode","GameOverLayer","GameUILayer","JJCYView","LevelLayer","MaskLayer","PopUpLayer","NetManager","SendMessage","GameScene","LoadingScene","LogoScene","RankListScene","SceneCom","SceneMgr","SelectScene","StartScene"]);